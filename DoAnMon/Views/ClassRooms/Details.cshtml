@using DoAnMon.IdentityCudtomUser
@using Microsoft.AspNetCore.Identity
@inject ICheckNop CheckNop

@inject UserManager<CustomUser> _userManager
@inject IUserStore<CustomUser> _userStore
@using static DoAnMon.Models.ClassroomViewModel
@model ClassRoomViewModel

@{
	string tenlop = Model.ClassRoom.Name;
	ViewData["Title"] = tenlop;
	Layout = "~/Views/Shared/_Layout.cshtml";
	var user = await _userManager.GetUserAsync(User);

	// T?o ƒë∆∞·ªùng d·∫´n cho m√£ QR
	var qrData = Model.ClassRoom.Id;

	// T·∫°o m√£ QR t·ªõi d·ªØ li·ªáu
	var writer = new ZXing.BarcodeWriterSvg
			{
				Format = ZXing.BarcodeFormat.QR_CODE,
				Options = new ZXing.QrCode.QrCodeEncodingOptions
				{
					Width = 100,
					Height = 100
				}
			};
	var qrCode = writer.Write(qrData);
}
<script src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/4.0.0/crypto-js.min.js"></script>

<style>
	body {
		font-family: Arial, sans-serif;
		margin: 0;
		padding: 0;
		box-sizing: border-box;
	}

	/* ================================= */

	.tabs {
		overflow: hidden;
		border-bottom: 1px solid #ccc;
	}

	.tab {
		float: left;
		cursor: pointer;
		padding: 14px 16px;
		transition: background-color 0.3s;
	}

	.tab:hover {
		background-color: #ddd;
	}

	.tab.active {
		background-color: #ccc;
	}

	.tabcontent {
		display: none;
		padding: 20px;
		clear: both;
	}

	.posts {
		padding-top: 20px;
	}

	.post {
		border-bottom: 1px solid #ccc;
		padding: 20px 0;
		margin-bottom: 20px;
	}

	.post img {
		max-width: 100%;
		height: auto;
		margin-bottom: 10px;
	}

	.post h2 {
		font-size: 20px;
		margin-bottom: 10px;
	}

	.post p {
		font-size: 16px;
		margin-bottom: 10px;
	}

	.post .author {
		font-style: italic;
		color: #666;
	}

	/* TH√îNG TIN GI?NG VI√äN */
	.teacher-info {
		background-color: #f9f9f9;
		padding: 20px;
		border-radius: 10px;
		box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
		/* Th√™m b√≥ng d? */
	}

	.teacher-details {
		display: flex;
		align-items: center;
	}

	.teacher-image {
		width: 100px;
		height: 100px;
		border-radius: 50%;
		margin-right: 20px;
		box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
		/* Th√™m b√≥ng d? */
		object-fit: cover;
	}

	.teacher-text {
		flex: 1;
	}

	.teacher-text p {
		margin-bottom: 10px;
	}

	.teacher-text p strong {
		font-weight: bold;
		color: #e72323;
	}

	/* POST B√ÄI GI·∫¢NG */
	.post {
		margin-bottom: 20px;
		padding: 20px;
		background-color: #f9f9f9;
		border-radius: 10px;
		box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
	}

	.post h2 {
		font-size: 24px;
		margin-bottom: 10px;
		text-align: center;
	}

	.pdf-container {
		width: 100%;
		height: 600px;
		overflow: auto;
	}

	.pdf-container object {
		width: 100%;
		height: 100%;
	}

	.pdf-container embed {
		width: 100%;
		height: 100%;
	}

	/* B√ÄI T·∫¨P */
	.assignment {
		background-color: white;
		padding: 20px;
		border-radius: 20px;
		margin-top: 20px;
		display: flex;
		border: 1px solid #333; /* Th√™m vi?n */
	}

	.assignment h3 {
		margin-top: 0;
		margin-bottom: 10px;
	}

	.assignment-description {
		margin-bottom: 20px;
	}

	.file-input-wrapper {
		margin-right: 20px;
	}

	.file-label {
		font-weight: bold;
	}

	.file-input {
		display: none;
	}

	.btn {
		padding: 10px 20px;
		color: #fff;
		border: none;
		border-radius: 5px;
		cursor: pointer;
		transition: background-color 0.3s;
	}

	.btn:hover {
		background-color: #0056b3;
	}

	/* UPLOAD BAITAP */
	.upload-form {
		display: flex;
		flex-direction: column;
		align-items: center;
		margin-bottom: 20px;
	}

	.file-label {
		margin-bottom: 10px;
	}

	.file-input-wrapper {
		width: 100%;
	}

	.file-input {
		width: 100%;
		padding: 10px;
		border: 1px solid #ccc;
		border-radius: 5px;
		background-color: #f9f9f9;
		transition: border-color 0.3s;
		margin: 10px;
	}

	.file-input:focus {
		border-color: #007bff;
		outline: none;
	}

	.btn {
		width: 100%;
		max-width: 200px; /* √ê?m b?o n√∫t kh√¥ng qu√° r?ng */
	}

	/*======================B?ng di?m======================*/
	.container-bangdiem {
		overflow-x: scroll;
	}

	/* Style for the first column */
	.first-column th:first-child,
	.first-column td:first-child {
		width: 200px; /* Fixed width for the first column */
		white-space: nowrap; /* Prevent wrapping content */
	}

	/* General table styling */
	#user {
		font-family: Arial, Helvetica, sans-serif;
		border-collapse: collapse;
		width: 100%;
		overflow-x: auto; /* Horizontal scroll for small screens */
	}

	#user td,
	#user th {
		border: 1px solid #ddd;
		padding: 8px;
	}

	#user tr:nth-child(even) {
		background-color: #f2f2f2;
	}

	#user tr:hover {
		background-color: #ddd;
	}

	#user th {
		padding-top: 12px;
		padding-bottom: 12px;
		text-align: left;
		background-color: #04AA6D;
		color: white;
	}

	/* T?o button change background */
	.custom-file-upload {
		display: inline-block;
		padding: 10px 20px;
		cursor: pointer;
		background-color: #ffffff; /* M√†u n?n */
		color: black; /* M√†u ch? */
		border-radius: 5px; /* Bo tr√≤n g√≥c */
		font-size: 16px;
		font-weight: bold;
		transition: background-color 0.3s ease; /* Hi?u ?ng chuy?n d?i m√†u */
	}

	.custom-file-upload:hover {
		background-color: #E3E1D9; /* M√†u n?n khi hover */
	}

	.custom-file-upload:active {
		background-color: #B4B4B8; /* M√†u n?n khi click */
	}

	/* Bright Modal */
	.modal {
		display: none;
		position: fixed;
		z-index: 1000;
		top: 50%;
		left: 50%;
		transform: translate(-50%, -50%);
		width: 100%;
		max-width: 400px;
		background-color: white; /* Bright Modal */
		border-radius: 8px; /* Rounded corners */
		padding: 20px;
	}

	.modal-content {
		padding: 20px;
	}

	.modal-header, .modal-body {
		padding-bottom: 15px;
	}

	.modal-title {
		margin-bottom: 10px;
	}

	.text-center {
		text-align: center;
	}

	progress {
		width: 100%;
		height: 20px;
	}

	/* Dark Background */
	.modal-backdrop {
		display: none;
		position: fixed;
		top: 0;
		left: 0;
		width: 100%;
		height: 100%;
		background-color: rgba(0, 0, 0, 0.7); /* Dark semi-transparent background */
		z-index: 999; /* Below the modal */
	}

	.modal.show, .modal-backdrop.show {
		display: block;
	}

	/*LOADER*/
	.loader {
		width: 100%;
		height: 10px;
		background: repeating-linear-gradient(-45deg, #766DF4 0 20px,#0000 0 40px) left/200% 100%;
		animation: i3 2s infinite linear;
		border-radius: 10px;
		border: 1px solid #766DF4;
	}

	@@keyframes i3 {
		100% {
			background-position: right
		}
	}

	.d-flex {
		display: flex;
	}

	.gap-2 {
		gap: 10px;
	}

	.delete-btn {
		position: absolute;
		top: 10px;
		right: 10px;
		border: none;
		background: transparent;
		font-size: 30px;
		color: black;
		cursor: pointer;
	}

	.delete-btn:hover {
		color: #ff0000;
	}

	.ctnleaveForm {
		justify-content: flex-start;
		gap: 20px;
	}

	/*th√¥ng b√°o*/
	.notify-text:hover {
		color: black; /* ƒê·ªïi m√†u ch·ªØ th√†nh ƒëen khi hover */
	}

	.notify-text {
		font-size: 14px;
		color: #7a7575; /* M√†u ch·ªØ m·∫∑c ƒë·ªãnh */
		margin-top: 10px;
		cursor: pointer;
	}

	.input-textarea {
		border: none; /* B·ªè vi·ªÅn m·∫∑c ƒë·ªãnh */
		border-bottom: 2px solid transparent; /* Vi·ªÅn d∆∞·ªõi ban ƒë·∫ßu */
		transition: border-bottom 0.3s ease, background-color 0.3s ease; /* Hi·ªáu ·ª©ng chuy·ªÉn ti·∫øp */
		border-radius: 5px; /* Bo g√≥c */
		background-color: rgb(230, 248, 248); /* M√†u n·ªÅn m·∫∑c ƒë·ªãnh */
		resize: none;
	}

	.input-textarea:hover {
		background-color: rgb(141, 250, 250); /* M√†u n·ªÅn khi hover */
	}

	.input-textarea:focus {
		outline: none; /* B·ªè vi·ªÅn m·∫∑c ƒë·ªãnh khi focus */
		border-bottom: 2px solid rgb(66, 133, 244); /* ƒê∆∞·ªùng vi·ªÅn d∆∞·ªõi khi focus */
	}


	/* N√∫t b·ªã v√¥ hi·ªáu h√≥a (disabled) */
	.disabled-button {
		background-color: lightgray;
		cursor: not-allowed;
		opacity: 0.6;
	}

	/* N√∫t k√≠ch ho·∫°t b√¨nh th∆∞·ªùng */
	.active-button {
		background-color: rgb(66, 133, 244);
		cursor: pointer;
		color: white;
		opacity: 1;
	}

	/*x√≥a & s·ª≠a*/
	.icon {
		border: none;
		background: none;
		width: 40px;
		height: 40px;
		border-radius: 50%;
		display: flex;
		align-items: center;
		justify-content: center; /* M√†u n·ªÅn khi hover */
	}

	.icon:hover {
		background-color: rgba(145, 137, 137, 0.2);
	}

	.discussion-container {
		display: flex;
		width: 100%;
		height: 600px;
		font-family: 'JetBrains Mono', serif;
	}

	/* Khung b√™n tr√°i (k√≠ch th∆∞·ªõc c·ªë ƒë·ªãnh) */
	.left-panel {
		flex: 0 0 400px;
		padding: 20px;
		border: 1px solid #ddd;
		border-radius: 20px;
		box-sizing: border-box;
		margin-right: 20px;
	}

	/* Khung b√™n ph·∫£i (co gi√£n) */
	.right-panel {
		flex: 1;
		display: flex;
		border: 1px solid #ddd;
		border-radius: 20px;
		box-sizing: border-box;
		flex-direction: column;
		position: relative;
	}

	/* Thi·∫øt l·∫≠p form v√† c√°c th√†nh ph·∫ßn b√™n trong */
	.input-hidden {
		display: none;
	}

	.message-input-group {
		display: flex;
		align-items: center;
		gap: 10px;
		background-color: #FBEAF0;
		padding: 10px;
		border-bottom-left-radius: 20px;
		border-bottom-right-radius: 20px;
		height: 70px;
	}


	#messageInput {
		flex: 1;
		border-radius: 30px;
		height: 45px;
		padding-left: 10px;
		font-size: 17px;
		border: none;
		outline: none;
	}

	.record {
		background-color: transparent; /* B·ªè m√†u n·ªÅn */
		border: none; /* B·ªè ƒë∆∞·ªùng vi·ªÅn */
		padding: 0; /* Lo·∫°i b·ªè kho·∫£ng c√°ch xung quanh */
		cursor: pointer; /* Th√™m hi·ªáu ·ª©ng con tr·ªè tay khi hover */
		display: flex;
		align-items: center;
	}


	/* Khung tin nh·∫Øn */
	.message-list {
		list-style-type: none;
		margin: 0;
		height: calc(100% - 70px);
		width: 100%;
		overflow-y: auto; /* Hi·ªÉn th·ªã thanh cu·ªôn d·ªçc n·∫øu n·ªôi dung v∆∞·ª£t qu√° chi·ªÅu cao */
		box-sizing: border-box; /* ƒê·∫£m b·∫£o padding kh√¥ng tƒÉng k√≠ch th∆∞·ªõc ph·∫ßn t·ª≠ */
	}

	.message-form {
		position: absolute;
		bottom: 0;
		width: 100%;
	}

	.send-button_discuss {
		background: none;
		border: none;
		cursor: pointer;
		outline: none;
		display: flex;
		align-items: center;
	}

	.send-icon_discuss {
		fill: #ff397f; /* M√†u bi·ªÉu t∆∞·ª£ng */
		width: 20px;
		height: 20px;
	}

	.image-icon_discuss {
		display: flex;
		align-items: center; /* Canh gi·ªØa icon theo chi·ªÅu d·ªçc */
	}

	.file-label {
		background-color: transparent; /* B·ªè m√†u n·ªÅn */
		border: none; /* B·ªè ƒë∆∞·ªùng vi·ªÅn */
		padding: 0; /* Lo·∫°i b·ªè kho·∫£ng c√°ch xung quanh */
		/*cursor: pointer;  Th√™m hi·ªáu ·ª©ng con tr·ªè tay khi hover */
		display: flex;
		align-items: center;
		margin: 0;
	}

	.file-name {
		font-family: Poppins, sans-serif;
		font-size: 14px;
		margin-left: 10px;
		color: #6c757d;
		display: inline-block;
		max-width: 350px;
		white-space: nowrap;
		overflow: hidden;
		text-overflow: ellipsis;
		margin-top: 15px;
	}

	.message-box {
		display: inline-block;
		max-width: 763px;
		border-radius: 10px;
		padding: 10px;
		background-color: #FBEAF0;
		margin-left: 15px
	}

	.current-user {
		justify-content: flex-end; /* Hi·ªÉn th·ªã b√™n ph·∫£i cho ng∆∞·ªùi kh√°c */
		align-items: flex-end;
		margin-left: auto;
	}

	/* Tin nh·∫Øn t·ª´ ng∆∞·ªùi kh√°c */
	.other-user {
		justify-content: flex-start; /* Hi·ªÉn th·ªã b√™n tr√°i cho ng∆∞·ªùi hi·ªán t·∫°i */
		align-items: flex-start;
	}

	.search-box_discuss {
		width: 100%;
		max-width: 400px;
		margin: 0 auto;
		position: relative;
		font-family: Arial, sans-serif;
	}

	.search-input_discuss {
		width: 90%;
		padding: 10px 15px;
		padding-left: 40px; /* ƒê·ªÉ ch·ª´a ch·ªó cho bi·ªÉu t∆∞·ª£ng t√¨m ki·∫øm */
		font-size: 16px;
		border: 1px solid #ccc;
		border-radius: 20px;
		outline: none;
		transition: border 0.3s ease;
		margin-top: 20px;
		margin-left: 20px;
		margin-right: 20px;
	}

		.search-input_discuss:focus {
			border-color: #0078ff;
		}

	/* Bi·ªÉu t∆∞·ª£ng t√¨m ki·∫øm */
	.search-icon_discuss {
		position: absolute;
		top: 65%;
		left: 30px;
		transform: translateY(-50%);
		color: #888;
		font-size: 18px;
		pointer-events: none;
	}

	.account-info-container_discuss {
		overflow-y: auto;
		height: 530px;
		width: 400px;
		border-bottom-left-radius: 35px;
		border-bottom-right-radius: 35px;
	}

	.circle-text-container_discuss {
		display: flex;
		align-items: center;
		width: 100%;
		padding: 15px;
		border: none;
		border-radius: 10px;
		background-color: none;
		position: relative;
		transition: background-color 0.3s;
	}

		.circle-text-container_discuss:hover {
			background-color: #E1E1E1;
		}

	.circle_discuss {
		margin-right: 10px; /* Kho·∫£ng c√°ch gi·ªØa h√¨nh tr√≤n v√† ch·ªØ */
	}

	.circle_discuss img {
		width: 90px;
		height: 90px;
		object-fit: cover;
		border-radius: 50%;
	}

	#listsv2 {
		display: flex;
		flex-wrap: wrap;
		gap: 20px;
	}

	.student-card {
		border: 1px solid #ddd;
		border-radius: 8px;
		padding: 10px;
		width: 200px;
		text-align: center;
		box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
	}

	.three-dots-icon_discuss {
		position: absolute;
		top: 10px; /* ƒê·∫∑t ·ªü ƒë·∫ßu container */
		right: 10px; /* Kho·∫£ng c√°ch t·ª´ b√™n ph·∫£i */
		cursor: pointer; /* Con tr·ªè chu·ªôt khi hover */
		color: #000000; /* M√†u cho bi·ªÉu t∆∞·ª£ng ba ch·∫•m */
	}

	.star-icon_discuss {
		position: absolute;
		bottom: 10px; /* Kho·∫£ng c√°ch t·ª´ tr√™n xu·ªëng */
		right: 10px; /* Kho·∫£ng c√°ch t·ª´ b√™n ph·∫£i */
		cursor: pointer; /* Con tr·ªè chu·ªôt khi hover */
		color: lightgray; /* M√†u v√†ng cho bi·ªÉu t∆∞·ª£ng ng√¥i sao */
	}

	.popup {
		display: none;
		position: fixed;
		z-index: 1;
		left: 0;
		top: 0;
		width: 100%;
		height: 100%;
		background-color: rgba(0, 0, 0, 0.4);
		overflow: auto;
		padding-top: 60px;
	}

	/* N·ªôi dung c·ªßa popup */
	.popup-content {
		background-color: #c7ffd0;
		margin: 5% auto;
		padding: 20px;
		border: 1px solid #888;
		width: 600px;
		border-radius: 20px;
		display: flex;
	}

	/* N√∫t ƒë√≥ng */
	.popup-close {
		color: black;
		float: right;
		font-size: 30px;
		font-weight: bold;
		margin-left: auto;
		margin-top: -10px;
	}

	.popup-close:hover,
	.popup-close:focus {
		color: red;
		text-decoration: none;
		cursor: pointer;
	}

	.popup-image {
		width: 150px;
		height: 200px;
		margin-right: 40px;
		display: flex;
		justify-content: center;
		align-items: center;
		border-radius: 20px;
		overflow: hidden;
		background-color: #f0f0f0;
		flex-shrink: 0;
	}

	.popup-details p {
		margin: 5px 0;
		line-height: 1.5;
		font-size: 18px;
		font-weight: 600;
	}

	.btn:hover {
		background-color: lightgray;
	}

	.btn-nghiphep {
		background-color: rgb(74, 113, 255);
		color: white;
		border: none;
		border-radius: 8px;
		padding: 5px;
		font-size: 16px;
		font-weight: bold;
		cursor: pointer;
		font-family: 'Itim', serif;
	}

	.btn-nghiphep:hover {
		background-color: #2000ff;
		color: white;
	}

	.card-letter {
		margin-top: 20px;
		border-radius: 20px;
		padding: 20px;
		box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
		transition: all 0.3s ease;
		position: relative;
	}

	.card-letter:hover {
		transform: translateY(-5px);
	}

	.btn-duyet {
		background-color: #28a745;
		color: white;
		border: none;
		border-radius: 5px;
		padding: 4px 8px;
		margin-right: 10px;
		font-size: 16px;
		font-family: 'Itim', serif;
	}

	.btn-tu-choi {
		background-color: #dc3545;
		color: white;
		border: none;
		border-radius: 5px;
		padding: 4px 8px;
		font-size: 16px;
		font-family: 'Itim', serif;
	}

	.card-text {
		font-size: 16px;
		font-family: 'Itim', serif;
	}

	.card-title {
		font-size: 16px;
		font-family: 'Itim', serif;
		margin-top: 0;
		font-weight: bold;
	}
</style>
<style>
	.container_listsv {
		width: 100%;
		display: flex;
		flex-direction: column;
		align-items: center;
		padding: 0;
		margin-top: -60px;
	}

	.row_listsv {
		width: 100%;
		display: flex;
		justify-content: center;
		flex-wrap: wrap;
		gap: 20px;
		margin-bottom: 20px;
	}

	.card_listsv {
		width: 18%; /* Adjusted for 5 cards per row */
		display: flex;
		flex-direction: column;
		align-items: center;
		padding: 20px;
		border: 1px solid #ddd;
		border-radius: 8px;
		box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
		background-color: #fff;
	}

	.img_listsv {
		width: 80px;
		height: 80px;
		border-radius: 50%;
		margin-bottom: 15px;
		box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
		object-fit: cover;
	}

	.p_listsv {
		margin: 5px 0;
		font-size: 16px;
		font-weight: bold;
		color: #333;
		text-align: center;
	}

	.hr_listsv {
		width: 100%;
		border: 0;
		border-top: 1px solid orange;
	}

	.header_listsv {
		font-weight: bold;
		font-size: 18px;
		margin-left: auto;
	}

	.invite_button {
		margin-top: 10px;
		padding: 10px 15px;
		background-color: orange;
		color: white;
		border: none;
		border-radius: 5px;
		cursor: pointer;
		font-size: 14px;
	}

	.invite_button:hover {
		background-color: darkorange;
	}
</style>
<style>
	.button_btnBaiGiang {
		position: relative;
		width: 10rem;
		height: 3rem;
		cursor: pointer;
		border: none;
		background: none;
	}

	.button_btnBaiGiang svg {
		width: 100%;
		height: 100%;
		overflow: visible;
	}

	.border_btnBaiGiang {
		width: 100%;
		height: 100%;
		stroke: black;
		stroke-width: 2px;
		fill: #0000;
		rx: 1em;
		ry: 1em;
		stroke-dasharray: 25;
		transition: fill 0.25s;
		animation: 4s linear infinite stroke-animation_btnBaiGiang;
	}

	.button_btnBaiGiang:hover .border_btnBaiGiang {
		fill: #0001;
	}

	.button_btnBaiGiang:focus .border_btnBaiGiang {
		transition: fill 0.25s 7.75s;
		fill: #0000;
	}

	@@keyframes stroke-animation_btnBaiGiang {
		0% {
			stroke-dashoffset: 100;
		}

		to {
			stroke-dashoffset: 0;
		}
	}

	.txt-upload_btnBaiGiang {
		position: absolute;
		inset: 0;
		display: flex;
		align-items: center;
		justify-content: center;
	}

	.txt-upload_btnBaiGiang::after {
		content: "";
	}

	.button_btnBaiGiang:focus .rect_btnBaiGiang {
		stroke-dasharray: 50;
	}

	.button_btnBaiGiang:focus .border_btnBaiGiang {
		stroke: #0000;
	}

	.button_btnBaiGiang:focus .txt-upload_btnBaiGiang {
		opacity: 0;
		transition: opacity 0.25s 8s;
	}

	.button_btnBaiGiang:focus .txt-upload_btnBaiGiang::after {
		animation: 0.66666s anim_btnBaiGiang step-end forwards, 1.33333s 0.6666s anim2_btnBaiGiang linear infinite alternate;
	}

	@@keyframes anim_btnBaiGiang {
		0% {
			content: "i";
		}

		50% {
			content: "in";
		}

		to {
			content: "ing";
		}
	}

	@@keyframes anim2_btnBaiGiang {
		0% {
			content: "ing";
		}

		33% {
			content: "ing.";
		}

		66% {
			content: "ing..";
		}

		to {
			content: "ing...";
		}
	}

	.loading_btnBaiGiang {
		width: 100%;
		height: 100%;
		stroke: #0055d4;
		stroke-width: 2px;
		fill: none;
		rx: 1em;
		ry: 1em;
		stroke-dasharray: 0 100;
		transition: stroke-dasharray 0.25s ease-out;
	}

	.button_btnBaiGiang:focus .loading_btnBaiGiang {
		transition: stroke 0.5s 7.5s, stroke-dasharray 8s 0.5s ease-out;
		stroke: #08ca08;
		stroke-dasharray: 100 0;
	}

	.done_btnBaiGiang {
		fill: none;
		stroke: #000;
		stroke-dasharray: 0 100;
	}

	.button_btnBaiGiang:focus .done-cloud_btnBaiGiang {
		transition: stroke-dasharray 0.75s 8.5s ease-out;
		stroke-dasharray: 100 0;
	}

	.button_btnBaiGiang:focus .done-check_btnBaiGiang {
		transition: stroke-dasharray 0.5s 9.2s ease-out;
		stroke: #08ca08;
		stroke-dasharray: 100 0;
	}

	/* Tr·∫°ng th√°i focus c·ªßa button */
	.button_btnBaiGiang.focus .txt-upload_btnBaiGiang {
		opacity: 0; /* ·∫®n text Upload khi trong tr·∫°ng th√°i focus */
	}

	.button_btnBaiGiang.focus .loading_btnBaiGiang {
		stroke-dasharray: 100 0; /* Hi·ªÉn th·ªã thanh ti·∫øn tr√¨nh */
	}

</style>
<style>
	.custom-file-upload {
		display: inline-block;
		padding: 10px 20px;
		cursor: pointer;
		background-color: #007bff;
		color: white;
		border: none;
		border-radius: 5px;
		font-size: 14px;
	}

	.custom-file-upload:hover {
		background-color: #0056b3;
	}

	#fileInput {
		display: none; /* ·∫®n th·∫ª input g·ªëc */
	}
</style>
<style>
	.ClassroomDetail-container {
		display: flex;
		width: 100%;
		min-height: 600px;
	}

	.ClassroomDetail-left-container {
		margin-left: 20px;
		width: 20%;
		font-family: "JetBrains Mono", serif;
	}

	.list-group-item {
		border: none; /* Lo·∫°i b·ªè vi·ªÅn */
	}

	.list-group-item + .list-group-item {
		border-top: 1px solid #ddd; /* Ch·ªâ gi·ªØ l·∫°i vi·ªÅn tr√™n */
	}

	.panel-heading {
		font-weight: bold;
		font-size: 15px;
	}

	.IDClass_list-group-item1 {
		align-content: center;
		font-size: 25px;
		font-weight: bold;
		color: red;
		padding-left: 5px;
	}

	.list-group-item1-container {
		display: flex;
		width: 100%;
		height: 100px;
		justify-content: space-around;
	}

	.list-group-item {
		margin: 0;
		padding: 0;
	}

	.padding-custom {
		padding: 10px;
	}

	.custom-VaoPhong {
		display: flex;
		justify-content: center;
		font-weight: bold;
		color: #295F98;
	}

	.custom-VaoPhong:hover {
		text-decoration: none;
	}

	.custom-VaoPhong:active, .custom-VaoPhong:visited, .custom-VaoPhong:focus {
		color: #295F98;
	}

	.ClassroomDetail-right-container {
		width: 80%;
		margin-left: 20px;
		font-family: "JetBrains Mono", serif;
	}

	.searchsv-container {
		width: 100%;
		display: flex;
		justify-content: center;
		margin-bottom: 20px;
	}

	#searchsvInput {
		width: 80%;
		max-width: 600px;
		padding: 12px 20px;
		font-size: 16px;
		border: 1px solid #ccc;
		border-radius: 25px;
		box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
		outline: none;
		transition: all 0.3s ease;
	}

	#searchsvInput:focus {
		border-color: #4CAF50;
		box-shadow: 0 6px 8px rgba(0, 0, 0, 0.2);
	}

	.khungtaodontu {
		font-family: 'Itim',serif;
		transform: translate(-50%, -50%);
		top: 50%;
		left: 50%;
		background-color: #dfe1fc;
		padding: 20px;
		border-radius: 8px;
		box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
		width: 700px;
		text-align: left;
		position: fixed;
		font-size: 16px;
		z-index: 1000;
	}

	.btn-guiyeucau {
		background-color: #007bff;
		color: white;
		font-size: 16px;
		font-weight: bold;
		padding: 7px 10px;
		border: none;
		border-radius: 8px;
		cursor: pointer;
		float: right;
	}

	.btn-taobaitap {
		background-color: #4a71ff;
		font-family: 'Itim',serif;
		color: #ffffff;
		padding: 10px 20px;
		border: none;
		border-radius: 20px;
		cursor: pointer;
		transition: background-color 0.3s;
		font-size: 18px;
		font-weight: bold;
	}

	.khungtaobaitap {
		font-family: 'Itim',serif;
		transform: translate(-50%, -50%);
		top: 50%;
		left: 50%;
		background-color: #dfe1fc;
		padding: 20px;
		border-radius: 8px;
		box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
		width: 700px;
		text-align: left;
		position: fixed;
		font-size: 16px;
	}

	.close-btn {
		background-color: #ff4d4d;
		color: #fff;
		border: none;
		padding: 7px 15px;
		cursor: pointer;
		font-size: 16px;
		margin-top: 20px;
		float: right;
		border-radius: 20px;
	}

	.close-btn:hover {
		background-color: #ff1a1a;
	}

	.giaobai-btn {
		background-color: #4a71ff;
		color: #fff;
		border: none;
		padding: 7px 15px;
		cursor: pointer;
		font-size: 16px;
		margin-top: 20px;
		border-radius: 20px;
	}

	.giaobai-btn:hover {
		background-color: #0022ff;
	}

	.assignment-left-box {
		width: 50%;
	}

	.assignment-middle-box {
		width: 25%;
		text-align: justify;
		padding-left: 20px;
		padding-right: 20px;
	}

	.assignment-right-box {
		width: 50%;
		align-items: center;
		justify-content: center;
		display: flex;
	}

	.divider {
		width: 1px;
		background-color: #333; /* M√†u g·∫°ch d·ªçc */
	}

	.btn-xoa {
		background-color: #dc3545; /* M√†u ƒë·ªè */
		color: white;
		border: none;
		padding: 10px;
		border-radius: 5px;
		cursor: pointer;
		transition: 0.3s;
	}

	.btn-xoa:hover {
		color: white;
		text-decoration: none;
	}

	.btn-xembaidanop {
		background-color: #4a71ff;
		color: white;
		border: none;
		padding: 10px;
		border-radius: 5px;
		cursor: pointer;
		transition: 0.3s;
		margin-right: 20px;
	}

	.btn-xembaidanop:hover {
		color: white;
		text-decoration: none;
	}

	.btn-nopbai {
		background-color: #28a745;
		color: white;
		border: none;
		padding: 10px 20px;
		border-radius: 5px;
		cursor: pointer;
		transition: 0.3s;
	}

	.btn-nopbai:hover {
		background-color: #218838;
	}

	.btn-xemtruoc {
		background-color: #007bff;
		color: white;
		border: none;
		padding: 10px 20px;
		border-radius: 5px;
		cursor: pointer;
		transition: 0.3s;
	}

	.btn-xemtruoc:hover {
		background-color: #0056b3;
	}

	.options-menu {
		display: none;
		position: absolute;
		top: 85px;
		right: 40px;
		padding: 15px;
		background-color: #fff;
		border: 1px solid #ccc;
		border-radius: 8px;
		box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
		z-index: 10;
		width: 150px;
	}

		.options-menu a {
			display: block;
			text-align: center;
			text-decoration: none;
			color: #333;
			padding: 10px;
			margin-bottom: 5px;
			border-radius: 5px;
			font-weight: 500;
			transition: background-color 0.3s ease, color 0.3s ease;
		}

			.options-menu a.btn-reusesua {
				background-color: #40c752;
				color: #fff;
				margin-bottom: 10px;
			}

			.options-menu a.btn-reusesxoa {
				background-color: #dc3545;
				color: #fff;
			}

	.overlay {
		display: none;
		position: fixed;
		top: 0;
		left: 0;
		width: 100%;
		height: 100%;
		background-color: rgba(0, 0, 0, 0.7);
		z-index: 1000;
	}

	/* Modal container */
	.khungreuse {
		position: absolute;
		top: 50%;
		left: 50%;
		transform: translate(-50%, -50%);
		background-color: #fff;
		color: black;
		border-radius: 8px;
		padding: 20px;
		width: 700px;
		height: 400px;
		overflow-y: auto;
		box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
	}

	/* Close button */
	.close-btn {
		float: right;
		background-color: red;
		color: white;
		border: none;
		cursor: pointer;
		border-radius: 4px;
		padding: 5px 10px;
		font-size: 18px;
		margin:0;
	}

	.tab-header {
		display: flex;
		justify-content: space-around;
		border-bottom: 2px solid #ddd;
		margin-bottom: 10px;
	}

	.tab-link {
		flex: 1;
		text-align: center;
		padding: 10px 0;
		cursor: pointer;
		font-size: 16px;
		background-color: #f8f9fa;
		border: none;
		transition: background-color 0.3s ease, font-weight 0.3s ease;
	}

		.tab-link.active {
			background-color: #007bff;
			color: white;
			font-weight: bold;
		}

	/* Tabs Body */
	.tab-body {
		flex-grow: 1;
		overflow-y: auto;
	}

	.tab-content {
		display: none;
	}

		.tab-content.active {
			display: block;
		}



		.close-btn i {
			font-size: 20px;
		}

	/* Post list and items */
	.mainList {
		display: block;
	}

	.post-item {
		display: flex;
		flex-direction: column;
		margin-bottom: 10px;
		padding: 5px;
		border-bottom: 1px solid #eee;
	}

	.post-title {
		font-weight: 500;
		flex-grow: 1;
	}

	.post-content {
		margin-bottom: 10px; 
		color: #555; 
	}

	.reuse-btn {
		align-self: flex-end;
		background-color: #007bff;
		color: white;
		border: none;
		padding: 6px 12px;
		cursor: pointer;
		border-radius: 4px;
		transition: background-color 0.3s ease;
	}

		.reuse-btn:hover {
			background-color: #0056b3;
		}

	/* Post edit form */

	.form-control {
		width: 100%;
		padding: 10px;
		margin-bottom: 10px;
		border: 1px solid #ddd;
		border-radius: 5px;
	}

	.input-textarea {
		width: 100%;
		border-radius: 5px;
		margin-top: 10px;
		padding: 10px;
		border: 1px solid #ddd;
		resize: vertical;
	}

	.submit-btn, .cancel-btn {
		background-color: #007bff;
		color: white;
		border: none;
		padding: 8px 16px;
		border-radius: 4px;
		cursor: pointer;
		margin-right: 10px;
		transition: background-color 0.3s ease;
	}

		.submit-btn:hover {
			background-color: #0056b3;
		}

	.cancel-btn {
		background-color: gray;
	}

		.cancel-btn:hover {
			background-color: #555;
		}
	.postList {
		margin-top:40px;
		display: none;
	}

	.postList {
		margin-top: 40px;
		display: none;
	}

</style>
<div style="position: relative; width: 100%;">
	<img class="img-fluid" src="/images/@Model.ClassRoom.backgroundUrl" alt="No Images" style="width: 100%; height: 400px;" />
	@{
		if (Model.isOwner)
		{
			<form id="changeBG" action="/ClassRooms/changeBackground" method="POST" enctype="multipart/form-data" style="position: absolute; bottom: 10px; right: 10px;">
				<input type="hidden" name="classId" value="@Model.ClassRoom.Id" />
				<label for="file-upload" class="custom-file-upload">
					<i class="fa-solid fa-camera"></i>
					Thay ƒë·ªïi ·∫£nh b√¨a
				</label>
				<input id="file-upload" type="file" name="image" accept="image/*" required
					   onchange="document.getElementById('changeBG').submit();" style="display:none;" />
			</form>
		}
	}
</div>
@* ================================= *@
<div class="ClassroomDetail-container">
	<div class="ClassroomDetail-left-container">
		<div class="panel panel-default" style="width: 100%; margin-top: 15px;">
			<div class="panel-heading">
				TH√îNG TIN L·ªöP H·ªåC
			</div>
			<ul class="list-group">
				<li class="list-group-item">
					<h6 style="text-align: center; font-weight: bold; font-size: 12px;">M√£ l·ªõp</h6>
					<div class="list-group-item1-container">
						<div class="IDClass_list-group-item1">
							<input type="hidden" id="contentcopy" value="@Model.ClassRoom.Id" readonly style="border: none; background: transparent; font-size: 14px; width: 60px;" />
							<button style="border: none; background-color: transparent;font-size: 25px;" id="btnCopy">
								@Model.ClassRoom.Id
							</button>

						</div>
						@Html.Raw(qrCode)
					</div>
				</li>
				<li class="list-group-item padding-custom" style="font-weight: bold;">@Model.ClassRoom.Name</li>
				<li class="list-group-item padding-custom">@Model.ClassRoom.Description</li>
				<li class="list-group-item padding-custom color-custom">
					<a href="@Model.ClassRoom.RoomOnline&User=@user.Id&class=@Model.ClassRoom.Id" id="diemDanhBtn" class="custom-VaoPhong" id="join-btn">Tham gia ph√≤ng h·ªçc</a>
				</li>
			</ul>
		</div>
		<div class="panel panel-default" style="width: 100%; margin-top: 15px;">
			<div class="panel-heading">
				ƒêI·ªÇM DANH
			</div>
			<ul class="list-group">
				@foreach (var item in Model.ClassDates)
				{
					DateTime now = DateTime.Now;
					if (item.Start <= now)
					{
						<li class="list-group-item padding-custom">
							Ng√†y @item.Start.ToString("dd/MM/yyyy")
							<span style="float: right;">
								<a asp-controller="DiemDanhs" asp-action="Index" asp-route-date="@item.Start.ToString("yyyy-MM-ddTHH:mm:ss")" asp-route-classroomId="@Model.ClassRoom.Id" style="text-decoration: none; color: #428bca">Xem chi ti·∫øt</a>
							</span>
						</li>
					}
				}
			</ul>
		</div>
	</div>
	<div class="ClassroomDetail-right-container">
		<div class="tabs" style="display: flex; justify-content: center;">
			<div class="tab" onclick="openTab(event, 'teacher')" style="font-family: Poppins, sans-serif;font-weight: 600">Th√¥ng tin gi√°o vi√™n</div>
			<div class="tab" onclick="openTab(event, 'posts')" style="font-family: Poppins, sans-serif;font-weight: 600">B√†i Gi·∫£ng</div>
			<div class="tab" onclick="openTab(event, 'assignments')" style="font-family: Poppins, sans-serif;font-weight: 600">B√†i t·∫≠p</div>
			<div class="tab" onclick="openTab(event, 'discussion')" style="font-family: Poppins, sans-serif;font-weight: 600">Th·∫£o lu·∫≠n</div>
			<div class="tab" onclick="openTab(event, 'listsv')" style="font-family: Poppins, sans-serif;font-weight: 600">Danh s√°ch sinh vi√™n</div>
			@{
				if (Model.CustomRubric == false)
				{
					<div class="tab" onclick="openTab(event, 'bangdiem')" style="font-family: Poppins, sans-serif;font-weight: 600">B·∫£ng ƒëi·ªÉm</div>
				}
				else
				{
					<div class="tab" onclick="openTab(event, 'bangdiemCustom')" style="font-family: Poppins, sans-serif;font-weight: 600">B·∫£ng ƒëi·ªÉm</div>
				}
			}
			@* <div class="tab" onclick="openTab(event, 'padlet')" style="font-family: Poppins, sans-serif;font-weight: 600">Padlet</div> *@
			<div class="tab" onclick="openTab(event, 'letter')" style="font-family: Poppins, sans-serif;font-weight: 600">ƒê∆°n t·ª´</div>
			@{
				if (Model.isOwner)
				{
					<div class="tab" onclick="openTab(event, 'setting')" style="font-family: Poppins, sans-serif;font-weight: 600">Tu·ª≥ ch·ªânh</div>
				}
			}
			<div class="tab" onclick="openTab(event, 'mainload')" style="font-family: Poppins, sans-serif;font-weight: 600" hidden>MainLoad</div>
		</div>
		<div id="teacher" class="tabcontent">
			<div class="teacher-info" style="background-color: #fdffe0">
				<h2 style="font-family: Poppins, sans-serif;">Th√¥ng tin gi√°o vi√™n</h2>
				<div class="teacher-details">
					<img src="/Imgs_avtUser/@Model.Owner.UrlAvt" alt="Teacher image" class="teacher-image" />
					<div class="teacher-text">
						<p style="font-family: Poppins, sans-serif;"><strong>M√£ gi·∫£ng vi√™n:</strong> @Model.Owner.Mssv</p>
						<p style="font-family: Poppins, sans-serif;"><strong>T√™n gi·∫£ng vi√™n:</strong> @Model.Owner.Name</p>
						<p style="font-family: Poppins, sans-serif;"><strong>Email:</strong> @Model.Owner.Email</p>
					</div>
				</div>
			</div>
		</div>
		<div id="posts" class="tabcontent">
			@{
				if (Model.isOwner)
				{
					<div>
						<button id="browseBaiGiang" class="button_btnBaiGiang">
							<svg xmlns="http://www.w3.org/2000/svg">
								<rect class="border_btnBaiGiang" pathLength="100"></rect>
								<rect class="loading_btnBaiGiang" id="progressBar_btnBaiGiang" pathLength="100"></rect>

								<svg class="done-svg_btnBaiGiang"
									 xmlns="http://www.w3.org/2000/svg"
									 viewBox="0 0 24 24">
									<path class="done_btnBaiGiang done-cloud_btnBaiGiang"
										  pathLength="100"
										  d="M 6.5,20 Q 4.22,20 2.61,18.43 1,16.85 1,14.58 1,12.63 2.17,11.1 3.35,9.57 5.25,9.15 5.88,6.85 7.75,5.43 9.63,4 12,4 14.93,4 16.96,6.04 19,8.07 19,11 q 1.73,0.2 2.86,1.5 1.14,1.28 1.14,3 0,1.88 -1.31,3.19 Q 20.38,20 18.5,20 Z"></path>
									<path class="done_btnBaiGiang done-check_btnBaiGiang"
										  pathLength="100"
										  d="M 7.515,12.74 10.34143,15.563569 15.275,10.625"></path>
								</svg>
							</svg>
							<div class="txt-upload_btnBaiGiang">Upload</div>
						</button>
					</div>
				}
			}
			<div class="posts" id="lectureContainer">
				<partial name="_lecturePartial" model="Model.Unit" />
			</div>
		</div>
		<div id="assignments" class="tabcontent" style="width:100%">
			@{
				if (Model.isOwner)
				{
					<button id="uploadButton" onclick="Showtaobaitap()" class="btn-taobaitap">T·∫°o b√†i t·∫≠p m·ªõi</button>
					<form class="khungtaobaitap" id="uploadbaitap" action="/ClassRooms/CreateBaitap" method="POST" style="display: none;" enctype="multipart/form-data">
						<div class="form-section">
							<label for="titleInput">Ti√™u ƒë·ªÅ b√†i t·∫≠p:</label>
							<input type="text" name="Title" id="titleInput" class="form-control" placeholder="Nh·∫≠p ti√™u ƒë·ªÅ">
							<label for="descriptionInput">M√¥ t·∫£ b√†i t·∫≠p:</label>
							<textarea name="Content" id="descriptionInput" class="form-control" placeholder="Nh·∫≠p m√¥ t·∫£" style="display: block;width: 660px;height: 130px; resize: none;"></textarea>
							<label for="deadlineInput">H·∫°n n·ªôp:</label>
							<input type="datetime-local" name="Deadline" id="deadlineInput" class="form-control">
							<label for="fileFormatSelect">Ch·ªçn ƒë·ªãnh d·∫°ng file c·∫ßn n·ªôp:</label>
							<select name="FileFormat" id="fileFormatSelect">
								<option value="pdf">pdf</option>
								<option value="docx">docx</option>
								<option value="xlsx">xls</option>
								<option value="zip">zip</option>
								<option value="rar">rar</option>
								<option value="png">png</option>
								<option value="mp4">mp4</option>
								<option value="allfile">all file</option>
							</select>
							<select name="bt_category">
								<option value="BTNhom">B√†i t·∫≠p nh√≥m</option>
								<option value="CaNhan">B√†i c√° nh√¢n</option>
							</select>
							<div></div>
							<label for="maxSize">Dung l∆∞·ª£ng t·ªëi ƒëa:</label>
							<input type="number" name="MaxSize" id="maxSize" class="form-control" placeholder="Dung l∆∞·ª£ng t·ªëi ƒëa cho ph√©p n·ªôp (MB)" />
						</div>
						<input type="hidden" name="ClassId" id="classIdInput" value="@Model.ClassRoom.Id">
						<label for="fileInput">H∆∞·ªõng d·∫´n (N·∫øu c√≥): </label>
						<input type="hidden" name="AttactURL" id="attactURL">
						<label for="fileInput" class="custom-file-upload">
							Upload file HD
						</label>
						<input type="file" name="FileUpLoad" id="fileInput" onchange="uploadFile()" />

						<div class="modal" id="uploadModal" style="background-color: transparent;">
							<div class="modal-content">
								<div class="modal-header">
									<h5 class="modal-title">Uploading File...</h5>
								</div>
								<div class="modal-body text-center">
									<div class="loader" id="loader" style="display: block;"></div>
									<progress id="progressBar" value="0" max="100" style="display: none;"></progress>
									<div id="progressText" style="display: block;" class="mt-3">0%</div>
									<div id="successText" class="mt-3" style="display: none;">Upload th√†nh c√¥ng</div>
								</div>
							</div>
						</div>

						<div class="modal-backdrop" id="modalBackdrop"></div>
						<div id="TenFile" style="display: inline;"></div>
						<div></div>
						<input type="submit" value="Giao b√†i" class="giaobai-btn">
						<button type="button" class="close-btn">ƒê√≥ng</button>
					</form>
				}
			}
			<div class="assignments">
				@{
					if (Model.Homework?.Count == 0)
					{
						<img src="~/images/emptyData.gif" style="width: 200px; height: auto; display: flex; justify-self: center;" />
						<h3 style="font-family: 'JetBrains Mono',serif; text-align: center;">Ch∆∞a c√≥ b√†i t·∫≠p ƒë∆∞·ª£c ƒëƒÉng l√™n</h3>
					}
				}

				@foreach (var assignment in Model.Homework.ToList())
				{
					<div class="assignment">
						<div class="assignment-left-box">
							<h3>@assignment.Title</h3>
							<p>@assignment.Content</p>
							@{
								if (assignment.Loaibt.Equals("CaNhan"))
								{
									<p><strong>Lo·∫°i b√†i t·∫≠p:</strong> B√†i t·∫≠p c√° nh√¢n</p>
								}
								else
								{
									<p><strong>Lo·∫°i b√†i t·∫≠p:</strong> B√†i t·∫≠p nh√≥m</p>
								}
							}
						</div>
						<div class="divider"></div>
						<div class="assignment-middle-box">
							@{
								if (assignment.Deadline.HasValue)
								{
									<p>H·∫°n n·ªôp: @assignment.Deadline</p>
								}
								else
								{
									<p>H·∫°n n·ªôp: V√¥ th·ªùi h·∫°n</p>
								}
							}

							<p class="assignment-file-format">Y√™u c·∫ßu n·ªôp file: @assignment.FileFormat</p>
							<p class="assignment-description">Dung l∆∞·ª£ng file t·ªëi ƒëa: @assignment.MaxSize MB</p>
							@if (!string.IsNullOrEmpty(assignment.attractUrl))
							{
								<a href="/Uploads/BAITAP/@assignment.attractUrl" target="_blank" style="text-decoration:none; color: deepskyblue!important;">@assignment.attractUrl</a>
							}
						</div>
						<div class="divider"></div>
						<div class="assignment-right-box">
							@{
								// L?y userId
								string userId = user != null ? user.Id : null;

								// L?y baiTapId t? assignment ho?c t? noi kh√°c
								string baiTapId = assignment != null ? assignment.Id : null;

								// Ki?m tra xem user d√£ n?p b√†i t?p hay chua
								bool hasSubmitted = userId != null && baiTapId != null ? CheckNop.HasUserSubmittedBaiTap(userId, baiTapId) : false;
							}

							<form id="submitForm_@assignment.Id" action="/ClassRooms/Nopbai" method="post" enctype="multipart/form-data" class="assignment-form" onsubmit="return validateAndSubmit('@assignment.FileFormat', '@assignment.Id', event)">
								@{
									if (!Model.isOwner)
									{
										<label for="file-upload" class="file-label1" style="white-space: nowrap;">B√†i t·∫≠p c·ªßa b·∫°n</label>
										<div class="file-input-wrapper">
											@{
												if (hasSubmitted)
												{
													<p style="text-align: center; margin-left: 15px;">ƒê√£ n·ªôp b√†i</p>
												}
												else
												{
													// Ki?m tra deadline
													if (assignment != null && assignment.Deadline.HasValue)
													{
														// L?y ng√†y deadline
														DateTime deadline = assignment.Deadline.Value;

														// Ki?m tra xem deadline d√£ qua hay chua
														if (DateTime.Now > deadline)
														{
															// X? l√Ω khi deadline d√£ qua
															// V√≠ d?: hi?n th? th√¥ng b√°o cho ngu?i d√πng
															<p style="text-align: center;">Deadline d√£ qua. Kh√¥ng th·ªÉ n·ªôp b√†i t·∫≠p n·ªØa.</p>
														}
														else
														{
															// X? l√Ω khi deadline chua qua
															// V√≠ d?: cho ph√©p ngu?i d√πng n?p b√†i t?p
															<p>Thi·∫øu</p>
															<input id="FileInput_@assignment.Id" type="file" name="FileNopbai" accept="@(assignment.FileFormat == "allfile" ? "/" : assignment.FileFormat)" onchange="checkFileSize(this, @assignment.MaxSize)">

															<input type="hidden" name="ClassId" id="classIdInput" value="@Model.ClassRoom.Id">
															<input type="hidden" name="BaitapId" id="baitapinput" value="@assignment.Id">
															<input type="hidden" id="uploadedFilePath" name="UploadedFilePath">
															<p id="uploadStatus_@assignment.Id"></p>
															<button type="submit" id="uploadButton_@assignment.Id" class="btn-nopbai">N·ªôp b√†i</button>
															<button type="button" onclick="previewFile('@assignment.Id')" class="btn-xemtruoc">Xem tr∆∞·ªõc</button>
														}
													}
													else
													{
														<p>Thi·∫øu</p>
														<input id="FileInput_@assignment.Id" type="file" name="FileNopbai" accept="@(assignment.FileFormat == "allfile" ? "/" : assignment.FileFormat)" onchange="checkFileSize(this, @assignment.MaxSize)">

														<input type="hidden" name="ClassId" id="classIdInput" value="@Model.ClassRoom.Id">
														<input type="hidden" name="BaitapId" id="baitapinput" value="@assignment.Id">
														<input type="hidden" id="uploadedFilePath" name="UploadedFilePath">
														<p id="uploadStatus_@assignment.Id"></p>
														<button type="submit" id="uploadButton_@assignment.Id" class="btn-nopbai">N·ªôp b√†i</button>
														<button type="button" onclick="previewFile('@assignment.Id')" class="btn-xemtruoc">Xem tr∆∞·ªõc</button>
													}
												}
											}
										</div>
										<div id="previewContainer_@assignment.Id"></div>
									}
									else
									{
										<a asp-action="GetAllBTStu" asp-controller="ClassRooms" asp-route-classid="@Model.ClassRoom.Id" asp-route-baitapID="@assignment.Id" class="btn-xembaidanop ">Xem b√†i t·∫≠p ƒë√£ n·ªôp</a>
										<a class="btn-xoa" asp-action="DeleteBT" asp-controller="ClassRooms" asp-route-id="@assignment.Id" asp-route-classId="@assignment.ClassRoomId" onclick="return confirm('B·∫°n c√≥ ch·∫Øc mu·ªën xo√° kh√¥ng ?')">X√≥a</a>
									}
								}
							</form>
						</div>

					</div>
				}
			</div>
		</div>
		<div id="discussion" class="tabcontent">
			<div class="discussion">
				<div class="discussion-container">
					<div class="right-panel">
						<div id="messagesList" class="message-list">
							<partial name="_MessagePartial" model="Model.Message" />
						</div>
						<form id="uploadForm" enctype="multipart/form-data" class="message-form">
							<div class="input-hidden">
								<input type="text" id="userInput" class="form-control" />
								<input type="text" id="classId" class="form-control" value="@Model.ClassRoom.Id" />
							</div>
							<div class="message-input-group">
								<button type="button" onclick="startSpeechRecognition()" id="recordButton" class="record" title="B·∫Øt ƒë·∫ßu ghi √¢m">
									<svg class="microphone-icon" height="25px" viewBox="0 0 24 24" width="25px">
										<title>Nh·∫•n ƒë·ªÉ ghi √¢m</title>
										<path d="M5 4a4 4 0 018 0v5.5a4 4 0 01-8 0V4z" fill="#ff397f"></path>
										<path d="M3.5 20.5a1 1 0 011-1h2.75a.5.5 0 00.5-.5v-.66a.52.52 0 00-.43-.5A8.5 8.5 0 01.5 9.5V9a1 1 0 011-1H2a1 1 0 011 1v.5a6 6 0 0012 0V9a1 1 0 011-1h.5a1 1 0 011 1v.5a8.5 8.5 0 01-6.82 8.33.52.52 0 00-.43.51V19c0 .28.22.5.5.5h2.75a1 1 0 011 1v.5a1 1 0 01-1 1h-9a1 1 0 01-1-1v-.5z" fill="#ff397f"></path>
									</svg>
								</button>
								<label class="file-label" for="FileInput" title="Ch·ªçn t·ªáp">
									<span class="image-icon_discuss">
										<svg xmlns="http://www.w3.org/2000/svg" width="25px" height="25px" fill="#ff397f" class="bi bi-paperclip" viewBox="0 0 16 16">
											<path d="M4.5 3a2.5 2.5 0 0 1 5 0v9a1.5 1.5 0 0 1-3 0V5a.5.5 0 0 1 1 0v7a.5.5 0 0 0 1 0V3a1.5 1.5 0 1 0-3 0v9a2.5 2.5 0 0 0 5 0V5a.5.5 0 0 1 1 0v7a3.5 3.5 0 1 1-7 0z" />
										</svg>
									</span>
								</label>
								<input type="file" id="FileInput" style="display: none;">
								@*<span id="fileName" class="file-name">Kh√¥ng c√≥ t·ªáp n√†o ƒë∆∞·ª£c ch·ªçn</span> *@
								<input type="text" class="form-control" id="messageInput" placeholder="Nh·∫≠p tin nh·∫Øn" />
								<button type="button" id="sendButton" class="send-button_discuss" aria-label="Nh·∫•n Enter ƒë·ªÉ g·ª≠i">
									<svg class="send-icon_discuss" height="25px" viewBox="0 0 24 24" width="25px">
										<title>Nh·∫•n Enter ƒë·ªÉ g·ª≠i</title>
										<path d="M16.6915026,12.4744748 L3.50612381,13.2599618 C3.19218622,13.2599618 3.03521743,13.4170592 3.03521743,13.5741566 L1.15159189,20.0151496 C0.8376543,20.8006365 0.99,21.89 1.77946707,22.52 C2.41,22.99 3.50612381,23.1 4.13399899,22.8429026 L21.714504,14.0454487 C22.6563168,13.5741566 23.1272231,12.6315722 22.9702544,11.6889879 C22.8132856,11.0605983 22.3423792,10.4322088 21.714504,10.118014 L4.13399899,1.16346272 C3.34915502,0.9 2.40734225,1.00636533 1.77946707,1.4776575 C0.994623095,2.10604706 0.8376543,3.0486314 1.15159189,3.99121575 L3.03521743,10.4322088 C3.03521743,10.5893061 3.34915502,10.7464035 3.50612381,10.7464035 L16.6915026,11.5318905 C16.6915026,11.5318905 17.1624089,11.5318905 17.1624089,12.0031827 C17.1624089,12.4744748 16.6915026,12.4744748 16.6915026,12.4744748 Z" fill="var(--chat-composer-button-color)"></path>
									</svg>
								</button>
							</div>
						</form>
					</div>
				</div>
			</div>


		</div>
		<div id="listsv" class="tabcontent">
			@{
				if (Model.isOwner)
				{
					<div style="margin-bottom: -35px;">
						<form asp-controller="ClassRooms" asp-action="ExportDSSV" asp-route-classID="@Model.ClassRoom.Id" method="post">
							<button type="submit" class="btn btn-info">Xu·∫•t danh s√°ch sinh vi√™n</button>
						</form>
					</div>
				}
			}
			<div class="searchsv-container">
				<input type="text" id="searchsvInput" placeholder="üîç T√¨m ki·∫øm sinh vi√™n..." onkeyup="filterStudents()">
			</div>
			<div id="listsv1">
				<div class="container_listsv">
					<p class="header_listsv">Sƒ© s·ªë: 0 sinh vi√™n</p>
					<hr class="hr_listsv">

					<div class="row_listsv">
						<div class="card_listsv">
							<img class="img_listsv" src="/Imgs_avtUser/avatar.jpg" alt="No Image">
							<p class="p_listsv">MSSV</p>
							<p class="p_listsv">Name</p>
							<button class="invite_button" onclick="sendInvite('sample_id')">G·ª≠i l·ªùi m·ªùi t·∫°o nh√≥m</button>
						</div>
					</div>
				</div>
			</div>
		</div>
		<!-- Div bao quanh b·∫£ng ƒëi·ªÉm -->
		@{
			if (Model.isOwner)
			{
				if (Model.CustomRubric == false)
				{
					<div id="bangdiem" class="tabcontent">
						@{
							List<BaiTap> bt = ViewBag.ListBT as List<BaiTap>;
							List<DiemViewModel> diems = ViewBag.ListDiem as List<DiemViewModel>;
						}
						<div class="container-bangdiem">
							<table id="user">
								<thead>
									<tr class="first-column">
										<th style="text-align: center;" rowspan="2">H·ªç v√† t√™n</th>
										<th style="text-align: center;" rowspan="2">MSSV</th>
										<th style="text-align: center;" colspan="@bt.Count">B√†i T·∫≠p</th>
										<th style="text-align: center;" rowspan="2">√êTB</th>
									</tr>
									<tr>
										@foreach (var item in bt)
										{
											<th style="text-align: center;">@item.Title</th>
										}
									</tr>
								</thead>
								<tbody>
									@foreach (var item in diems)
									{
										<tr>
											<td>@item.HoVaTen</td>
											<td>@item.MSSV</td>

											@if (bt.Count <= 0)
											{
												<td> </td>
											}
											else
											{
												@foreach (var d in @item.listDiemBT)
												{
													<td style="text-align: center;">@d</td>
												}
											}
											<td>@item.DTB</td>
										</tr>
									}
								</tbody>
							</table>
						</div>
					</div>
				}
				else
				{
					<div id="bangdiemCustom" class="tabcontent">
						<iframe style="border: none;" src="@Url.Action("Details", "Rubrics", new { id = Model.Rubric.Id, classRoomId = Model.ClassRoom.Id, isowner = Model.isOwner})" width="100%" height="600px"></iframe>
					</div>
				}
			}
			else
			{
				if (Model.ClassRoom.ShowRubric == 1)
				{

					if (Model.CustomRubric == false)
					{
						<div id="bangdiem" class="tabcontent">
							@{
								List<BaiTap> bt = ViewBag.ListBT as List<BaiTap>;
								List<DiemViewModel> diems = ViewBag.ListDiem as List<DiemViewModel>;
							}
							<div class="container-bangdiem">
								<table id="user">
									<thead>
										<tr class="first-column">
											<th style="text-align: center;" rowspan="2">H·ªç v√† t√™n</th>
											<th style="text-align: center;" rowspan="2">MSSV</th>
											<th style="text-align: center;" colspan="@bt.Count">B√†i T·∫≠p</th>
											<th style="text-align: center;" rowspan="2">√êTB</th>
										</tr>
										<tr>
											@foreach (var item in bt)
											{
												<th style="text-align: center;">@item.Title</th>
											}
										</tr>
									</thead>
									<tbody>
										@foreach (var item in diems)
										{
											<tr>
												<td>@item.HoVaTen</td>
												<td>@item.MSSV</td>

												@if (bt.Count <= 0)
												{
													<td> </td>
												}
												else
												{
													@foreach (var d in @item.listDiemBT)
													{
														<td style="text-align: center;">@d</td>
													}
												}
												<td>@item.DTB</td>
											</tr>
										}
									</tbody>
								</table>
							</div>
						</div>
					}
					else
					{
						<div id="bangdiemCustom" class="tabcontent">
							<iframe style="border: none;" src="@Url.Action("Details", "Rubrics", new { id = Model.Rubric.Id, classRoomId = Model.ClassRoom.Id, isowner = Model.isOwner})" width="100%" height="600px"></iframe>
						</div>
					}
				}
				else
				{

					if (Model.CustomRubric == false)
					{
						<div id="bangdiem" class="tabcontent">
							<div class="text-center" style="margin-top: 150px"><p class="text-center">B·∫°n kh√¥ng c√≥ quy·ªÅn xem b·∫£ng ƒëi·ªÉm !!!</p></div>
						</div>
					}
					else
					{
						<div id="bangdiemCustom" class="tabcontent">
							<div class="text-center" style="margin-top: 150px"><p class="text-center">B·∫°n kh√¥ng c√≥ quy·ªÅn xem b·∫£ng ƒëi·ªÉm !!!</p></div>
						</div>
					}

				}
			}
		}

		@*<div id="padlet" class="tabcontent">
		<div class="padlet-embed" style="border:1px solid rgba(0,0,0,0.1);border-radius:2px;box-sizing:border-box;overflow:hidden;position:relative;width:100%;background:#F4F4F4"><p style="padding:0;margin:0"><iframe src="https://padlet.com/embed/lup9um2r33899yju" frameborder="0" allow="camera;microphone;geolocation" style="width:100%;height:608px;display:block;padding:0;margin:0"></iframe></p><div style="display:flex;align-items:center;justify-content:end;margin:0;height:28px"><a href="https://padlet.com?ref=embed" style="display:block;flex-grow:0;margin:0;border:none;padding:0;text-decoration:none" target="_blank"><div style="display:flex;align-items:center;"><img src="https://padlet.net/embeds/made_with_padlet_2022.png" width="114" height="28" style="padding:0;margin:0;background:0 0;border:none;box-shadow:none" alt="Made with Padlet"></div></a></div></div>
		</div>*@

		<div id="letter" class="tabcontent">
			<button type="button" class="btn btn-nghiphep" onclick="toggleLeaveRequestForm()">T·∫°o ƒë∆°n xin ngh·ªâ ph√©p</button>
			<div id="leaveRequestFormContainer" style="display:none; margin-top: 20px;">
				<form id="leaveRequestForm" class="khungtaodontu">
					<input type="hidden" name="Id" value="0" />

					<div class="form-group" hidden>
						<label for="ClassId">Class ID:</label>
						<input type="text" class="form-control" id="ClassId" name="ClassId" value="@Model.ClassRoom.Id" readonly hidden />
					</div>

					<div class="form-group">
						<label for="StudenName">H·ªç v√† t√™n:</label>
						<input type="text" class="form-control" id="StudenName" name="Name" value="@user.Name" readonly />
						<input type="hidden" class="form-control" id="UserID" name="UserID" value="@user.Id" hidden />
					</div>

					<div class="form-group">
						<label for="StartDate">Ng√†y b·∫Øt ƒë·∫ßu:</label>
						<input type="date" class="form-control" id="StartDate" name="StartDate" />
					</div>

					<div class="form-group">
						<label for="EndDate">Ng√†y k·∫øt th√∫c:</label>
						<input type="date" class="form-control" id="EndDate" name="EndDate" />
					</div>

					<div class="form-group">
						<label for="Reason">L√Ω do:</label>
						<textarea class="form-control" id="Reason" name="Reason" rows="4" style="resize: none;"></textarea>
					</div>

					<button type="submit" class="btn-guiyeucau" onclick="submitLeaveRequest(event)">G·ª≠i y√™u c·∫ßu</button>
				</form>
			</div>

			<div class="ctnleaveForm">
				<div id="leaveRequestsList" class="row">
					<!-- Cards will be dynamically added here -->
				</div>
			</div>

		</div>
		<div id="setting" class="tabcontent">
			<form asp-action="Edit" asp-controller="ClassRooms" method="post" id="editClassRoomForm">
				<input type="hidden" asp-for="@Model.ClassRoom.Id" name="Id" />

				<div class="form-group">
					<label asp-for="@Model.ClassRoom.Name">T√™n l·ªõp h·ªçc</label>
					<input class="form-control" asp-for="@Model.ClassRoom.Name" name="Name" />
					<span asp-validation-for="@Model.ClassRoom.Name" class="text-danger"></span>
				</div>

				<div class="form-group">
					<label asp-for="@Model.ClassRoom.Description">M√¥ t·∫£</label>
					<textarea style="resize: none;" class="form-control" asp-for="@Model.ClassRoom.Description" name="Description"></textarea>
					<span asp-validation-for="@Model.ClassRoom.Description" class="text-danger"></span>
				</div>

				<div class="form-group">
					<label asp-for="@Model.ClassRoom.StartDate">Ng√†y b·∫Øt ƒë·∫ßu kho√° h·ªçc</label>
					<input class="form-control" asp-for="@Model.ClassRoom.StartDate" name="StartDate" type="date" />
					<span asp-validation-for="@Model.ClassRoom.StartDate" class="text-danger"></span>
				</div>

				<div class="form-group">
					<label asp-for="@Model.ClassRoom.EndDate">Ng√†y k·∫øt th√∫c kho√° h·ªçc</label>
					<input class="form-control" asp-for="@Model.ClassRoom.EndDate" name="EndDate" type="date" />
					<span asp-validation-for="@Model.ClassRoom.EndDate" class="text-danger"></span>
				</div>

				<div class="form-group">
					<label>Ng√†y h·ªçc</label><br />
					@foreach (var day in Enum.GetValues(typeof(DayOfWeek)).Cast<DayOfWeek>())
					{
						<div class="form-check form-check-inline">
							<input class="form-check-input" type="checkbox"
									name="DaysOfWeek"
									value="@day"
								@(Model.ClassRoom.DaysOfWeek.Contains(day.ToString()) ? "checked" : "") />
							<label class="form-check-label">@day</label>
						</div>
					}
					<span asp-validation-for="@Model.ClassRoom.DaysOfWeek" class="text-danger"></span>
				</div>

				<div class="form-group">
					<label asp-for="@Model.ClassRoom.StartTime">Gi·ªù b·∫Øt ƒë·∫ßu</label>
					<input class="form-control" asp-for="@Model.ClassRoom.StartTime" name="StartTime" type="time" />
					<span asp-validation-for="@Model.ClassRoom.StartTime" class="text-danger"></span>
				</div>

				<div class="form-group">
					<label asp-for="@Model.ClassRoom.EndTime">Gi·ªù k·∫øt th√∫c</label>
					<input class="form-control" asp-for="@Model.ClassRoom.EndTime" name="EndTime" type="time" />
					<span asp-validation-for="@Model.ClassRoom.EndTime" class="text-danger"></span>
				</div>
				<div class="form-group">
					<label for="publicRubric">Ch·∫ø ƒë·ªô hi·ªÉn th·ªã b·∫£ng ƒëi·ªÉm</label><br />

					<input type="radio" id="showPublic" name="ShowRubric" value="0"
					@if (Model.ClassRoom.ShowRubric == 0)
					{
						<text>checked</text>
					} />
					<label for="showPublic">Ri√™ng t∆∞</label><br />

					<input type="radio" id="showPrivate" name="ShowRubric" value="1"
					@if (Model.ClassRoom.ShowRubric == 1)
					{
						<text>checked</text>
					} />
					<label for="showPrivate">C√¥ng khai</label><br />
				</div>
				<button type="submit" class="btn btn-primary" id="saveButton_setting">L∆∞u th√¥ng tin</button>
			</form>
			<form asp-action="Delete" method="post" id="deleteForm">
				<input type="hidden" name="Id" value="@Model.ClassRoom.Id" />
				<button type="submit" class="btn btn-sm btn-danger btn-action" style="font-size: 14px;" data-bs-toggle="modal" data-bs-target="#deleteModal">X√≥a</button>
			</form>
			<!-- Modal join-->
			<div class="modal fade" id="deleteModal" tabindex="-1" role="dialog" aria-labelledby="DeleteModelLabel" aria-hidden="true">
				<div class="modal-dialog" role="document">
					<div class="modal-content">
						<div class="modal-header">
							<h5 class="modal-title" id="DeleteModelLabel" style="font-family: 'Itim', serif; letter-spacing: 2px;">Confirm Deletion</h5>
							<button type="button" class="close" data-dismiss="modal" aria-label="Close">
								<span aria-hidden="true">&times;</span>
							</button>
						</div>
						<div class="modal-body">
							Th·∫ßy/C√¥ c√≥ ch·∫Øc l√† mu·ªën xo√° l·ªõp n√†y kh√¥ng ?
						</div>
						<div class="modal-footer">
							<button type="button" class="btn btn-primary" style="font-family: 'Itim', serif" data-dismiss="modal">Close</button>
							<button type="button" class="btn btn-danger" id="confirmDeleteButton">Delete</button>
						</div>
					</div>
				</div>
			</div>
		</div>
		<div id="mainload" class="tabcontent">
			<div class="text-center">
				<h1 class="display-4" style="font-family: 'Poppins', sans-serif">Let's Study With Us</h1>
				<p id="currentDateTime" style="font-family: 'Poppins', sans-serif"></p>
			</div>
			@{
				// T·∫°o m·ªôt danh s√°ch k·∫øt h·ª£p c√°c ƒë·ªëi t∆∞·ª£ng v√¥ danh
				var combinedList = Model.Post.Select(p => new
				{
					Type = "Post",
					Id = p.Id,
					Title = p.Title,
					Content = p.Content,
					CreatedAt = p.CreateTime,
					OwnerName = Model.Owner.Name,
					ClassRoomId = p.ClassRoomId
				})
				.Union(Model.Homework.Select(h => new
				{
					Type = "Homework",
					Id = h.Id,
					Title = h.Title,
					Content = (string)null, // B√†i t·∫≠p c√≥ th·ªÉ kh√¥ng c√≥ n·ªôi dung
					CreatedAt = h.CreatedAt,
					OwnerName = Model.Owner.Name,
					ClassRoomId = h.ClassRoomId
				}))
				.OrderByDescending(item => item.CreatedAt) // S·∫Øp x·∫øp theo th·ªùi gian t·∫°o
				.ToList();
			}
			@{
				if (Model.isOwner)
				{
					<div class="create-content"
						 style="border: 1px solid rgb(145, 137, 137);
												border-radius: 8px;
												padding: 10px;
												height: 100%;
												margin: 20px;
												display: flex;
												align-items: center;">

						<!-- Icon h√¨nh tr√≤n v·ªõi SVG b√™n trong -->
						<div class="circle-icon" style="background-color: rgb(66, 133, 244); border-radius: 50%; width: 40px; height: 40px; display: flex; align-items: center; justify-content: center; margin-right: 10px; margin-left: 20px;">
							<svg focusable="false" width="24" height="24" viewBox="0 0 24 24" class="NMm5M hhikbc" style="fill: white;">
								<path d="M7 15h7v2H7zm0-4h10v2H7zm0-4h10v2H7z"></path>
								<path d="M19 3h-4.18C14.4 1.84 13.3 1 12 1c-1.3 0-2.4.84-2.82 2H5c-.14 0-.27.01-.4.04a2.008 2.008 0 0 0-1.44 1.19c-.1.23-.16.49-.16.77v14c0 .27.06.54.16.78s.25.45.43.64c.27.27.62.47 1.01.55.13.02.26.03.4.03h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-7-.25c.41 0 .75.34.75.75s-.34.75-.75.75-.75-.34-.75-.75.34-.75.75-.75zM19 19H5V5h14v14z"></path>
							</svg>
						</div>

						<!-- VƒÉn b·∫£n th√¥ng b√°o v·ªõi s·ª± ki·ªán onclick -->
						<h3 class="notify-text" style="cursor: pointer; margin-left: 20px;" onclick="expandContent()">Th√¥ng b√°o n·ªôi dung n√†o ƒë√≥ cho l·ªõp h·ªçc c·ªßa b·∫°n</h3>
						@{
							if (Model.isOwner)
							{
								<div style="background-color: none; color: white; border-radius: 50%; width: 40px; height: 40px; display: flex; align-items: center; justify-content: center; margin-left: auto;">
									<button onclick="toggleClassSelection()" class="icon">
										<svg focusable="false" width="24" height="24" viewBox="0 0 24 24" class=" NMm5M">
											<path d="M19 5H4v6h2V7h13M5 19h15v-6h-2v4H5"></path>
											<path d="M16.29 10.71l-1.41-1.42L18.17 6l-3.29-3.29 1.41-1.42L21 6zm-8.58 12L3 18l4.71-4.71 1.41 1.42L5.83 18l3.29 3.29z"></path>
										</svg>
									</button>
								</div>
							}
						}
						<!-- Ph·∫ßn form ·∫©n -->
						<form id="uploadpost" action="/ClassRooms/CreatePost" method="POST" style="width: 100%; display: none;">
							<div id="expandable-form" style="display: none; width: 100%;">
								<input type="text" name="Title" id="titleInput" class="form-control" placeholder="Nh·∫≠p ti√™u ƒë·ªÅ" style="margin-bottom: 10px; width: 100%; border-radius: 5px; padding: 10px;" />
								<textarea name="Content" id="inputText" rows="4" class="input-textarea" oninput="checkInput()" style="width: 100%; border-radius: 5px; margin-top: 10px; padding: 10px;" placeholder="Nh·∫≠p n·ªôi dung..."></textarea>
								<div style="display: flex; justify-content: flex-end; margin-top: 10px;">
									<button type="button" onclick="cancelInput()" style="margin-right: 10px; padding: 5px 10px;">H·ªßy</button>
									<button id="submitButton" class="disabled-button" onclick="submitInput()" style="padding: 5px 10px;" disabled>ƒêƒÉng</button>
								</div>
							</div>
							<input type="hidden" name="ClassId" id="classIdInput" value="@Model.ClassRoom.Id" />
							<input type="hidden" name="UserId" id="UserIdInput" value="@Model.ClassRoom.UserId" />
						</form>
					</div>
					<div id="postContainer" class="overlay">
						<div class="khungreuse">
							<button class="close-btn" onclick="closePostContainer()"><i class="fas fa-times"></i></button>
								<div class="tab-header">
									<button class="tab-link active" onclick="switchTab(event, 'notifications')">Th√¥ng b√°o</button>
									<button class="tab-link" onclick="switchTab(event, 'baigiang')">B√†i gi·∫£ng</button>
									<button class="tab-link" onclick="switchTab(event, 'baitap')">B√†i t·∫≠p</button>
								</div>
								<div class="tab-body">
									<!-- Tab: Th√¥ng b√°o -->
									<div id="notifications" class="tab-content active">
										<div class="mainList">
											@foreach (var post in ViewBag.UserPosts)
											{
												<div class="post-item">
													<span class="post-title">@post.Title</span>
													<span class="post-content">@post.Content</span>
													<button class="reuse-btn" onclick="showPostContent('@post.Id')">S·ª≠ d·ª•ng l·∫°i</button>
												</div>
											}
										</div>
										@foreach (var post in ViewBag.UserPosts)
										{
											<div id="postList-@post.Id" class="postList">
												<form method="post" asp-action="ReusePost" asp-controller="ClassRooms">
													<input type="hidden" name="postId" value="@post.Id" />
													<input type="hidden" name="ClassId" id="classIdInput" value="@Model.ClassRoom.Id" />
													<input type="hidden" name="UserId" id="UserIdInput" value="@Model.ClassRoom.UserId" />
													<input type="text" name="Title" class="form-control" value="@post.Title" />
													<textarea name="Content" class="input-textarea">@post.Content</textarea>
													<button type="submit" class="submit-btn">ƒêƒÉng</button>
													<button type="button" class="cancel-btn" onclick="cancelReuse('@post.Id')">H·ªßy</button>
												</form>
											</div>
										}

									</div>
									<!-- Tab: B√†i gi·∫£ng -->
									<div id="baigiang" class="tab-content">
										<div class="mainList">
										@foreach (var lecture in ViewBag.ReuseBaigiang)
											{
												<div class="post-item">
													<span class="post-title">@lecture.Name</span>
													<button class="reuse-btn" onclick="openReuseLectureModal('@lecture.Id')">S·ª≠ d·ª•ng l·∫°i</button>
												</div>
											}
										</div>
									@foreach (var lecture in ViewBag.ReuseBaigiang)
									{
										<div id="postList-@lecture.Id" class="postList">
											<form method="post" asp-action="ReuseLecture" asp-controller="ClassRooms">
												<input type="hidden" name="originalLectureId" value="@lecture.Id" />
												<input type="hidden" name="classId" value="@Model.ClassRoom.Id" />

												<label for="newLectureName">T√™n b√†i gi·∫£ng m·ªõi:</label>
												<input type="text" name="newLectureName" id="newLectureName" value="@lecture.Name" />

												<button type="submit" class="submit-btn">ƒêƒÉng</button>
												<button type="button" class="cancel-btn" onclick="closeReuseLectureModal('@lecture.Id')">H·ªßy</button>
											</form>
										</div>
									}
								</div>
									<!-- Tab: B√†i t·∫≠p -->
									<div id="baitap" class="tab-content">
										<div class="mainList">
										@foreach (var assignment in ViewBag.ReuseBaitap)
										{
											<div class="post-item">
												<span class="post-title">@assignment.Title</span>
												<span class="post-content">@assignment.Content</span>
												<button class="reuse-btn" onclick="openReuseModal('@assignment.Id')">S·ª≠ d·ª•ng l·∫°i</button>
											</div>
										}
										</div>
									@foreach (var assignment in ViewBag.ReuseBaitap)
									{
										<div id="assignmentList-@assignment.Id" class="postList">
											<form method="post" asp-action="ReuseBaitap" asp-controller="ClassRooms">
												<input type="hidden" name="originalBaitapId" value="@assignment.Id" />
												<input type="hidden" name="classId" value="@Model.ClassRoom.Id" />

												<label for="newTitle">Ti√™u ƒë·ªÅ m·ªõi:</label>
												<input type="text" name="newTitle" id="newTitle" value="@assignment.Title" />

												<label for="newContent">N·ªôi dung m·ªõi:</label>
												<textarea name="newContent" id="newContent">@assignment.Content</textarea>

												<label for="newDeadline">H·∫°n n·ªôp m·ªõi:</label>
												<input type="datetime-local" name="newDeadline" id="newDeadline" value="@assignment.Deadline?.ToString("yyyy-MM-ddTHH:mm")" />

												<label for="newfileFormatSelect">Ch·ªçn ƒë·ªãnh d·∫°ng file c·∫ßn n·ªôp:</label>
												<select name="newFileFormat" id="newfileFormatSelect">
													<option value="pdf">pdf</option>
													<option value="docx">docx</option>
													<option value="xlsx">xls</option>
													<option value="zip">zip</option>
													<option value="rar">rar</option>
													<option value="png">png</option>
													<option value="mp4">mp4</option>
													<option value="allfile">all file</option>
												</select>

												<select name="newbt_category">
													<option value="BTNhom">B√†i t·∫≠p nh√≥m</option>
													<option value="CaNhan">B√†i c√° nh√¢n</option>
												</select>


												<label for="newmaxSize">Dung l∆∞·ª£ng t·ªëi ƒëa:</label>
												<input type="number" name="MaxSize" id="maxSize" class="form-control" placeholder="Dung l∆∞·ª£ng t·ªëi ƒëa cho ph√©p n·ªôp (MB)" />

												<label for="fileInput">H∆∞·ªõng d·∫´n (N·∫øu c√≥):</label>
												<input type="hidden" name="AttactURL" id="attactURL" />
												<label for="fileInput" class="custom-file-upload">Upload file HD</label>
												<input type="file" name="FileUpLoad" id="fileInput" onchange="uploadFile()" />

												<!-- Modal Upload -->
												<div class="modal" id="uploadModal" style="background-color: transparent; display: none;">
													<div class="modal-content">
														<div class="modal-header">
															<h5 class="modal-title">Uploading File...</h5>
														</div>
														<div class="modal-body text-center">
															<div class="loader" id="loader" style="display: block;"></div>
															<progress id="progressBar" value="0" max="100" style="display: none;"></progress>
															<div id="progressText" style="display: block;" class="mt-3">0%</div>
															<div id="successText" class="mt-3" style="display: none;">Upload th√†nh c√¥ng</div>
														</div>
													</div>
												</div>
												<div class="modal-backdrop" id="modalBackdrop" style="display: none;"></div>
												<div id="TenFile" style="display: inline;"></div>

												<button type="submit" class="submit-btn">ƒêƒÉng</button>
												<button type="button" class="cancel-btn" onclick="closeReuseModal('@assignment.Id')">H·ªßy</button>
											</form>
										</div>
									}
									</div>
								</div>
							@*<div class="mainList">
								@foreach (var post in ViewBag.UserPosts)
								{
									<div class="post-item">
										<span class="post-title">@post.Title</span>
										<button class="reuse-btn" onclick="showPostContent('@post.Id')">S·ª≠ d·ª•ng l·∫°i</button>
									</div>
								}
							</div>

							@foreach (var post in ViewBag.UserPosts)
							{
								<div id="postList-@post.Id" class="postList">
									<form method="post" asp-action="ReusePost" asp-controller="ClassRooms">
										<input type="hidden" name="postId" value="@post.Id" />
										<input type="hidden" name="ClassId" id="classIdInput" value="@Model.ClassRoom.Id" />
										<input type="hidden" name="UserId" id="UserIdInput" value="@Model.ClassRoom.UserId" />
										<input type="text" name="Title" class="form-control" value="@post.Title" />
										<textarea name="Content" class="input-textarea">@post.Content</textarea>
										<button type="submit" class="submit-btn">ƒêƒÉng</button>
										<button type="button" class="cancel-btn" onclick="cancelReuse('@post.Id')">H·ªßy</button>
									</form>
								</div>
					}*@
						</div>
					</div>
				}
			}


			@foreach (var item in combinedList)
			{
				<div class="create-content"
						style="border: 1px solid rgb(145, 137, 137);
						border-radius: 8px;
						padding: 10px;
						height: 100%;
						margin: 20px;
						display: flex;
						align-items: center;
						position: relative;">

					<div id="circle-icon-@item.Id" style="background-color: rgb(66, 133, 244); border-radius: 50%; width: 40px; height: 40px; display: flex; align-items: center; justify-content: center; margin-right: 10px; margin-left: 20px;">
						<svg focusable="false" width="24" height="24" viewBox="0 0 24 24" class="NMm5M hhikbc" style="fill: white;">
							<path d="M7 15h7v2H7zm0-4h10v2H7zm0-4h10v2H7z"></path>
							<path d="M19 3h-4.18C14.4 1.84 13.3 1 12 1c-1.3 0-2.4.84-2.82 2H5c-.14 0-.27.01-.4.04a2.008 2.008 0 0 0-1.44 1.19c-.1.23-.16.49-.16.77v14c0 .27.06.54.16.78s.25.45.43.64c.27.27.62.47 1.01.55.13.02.26.03.4.03h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-7-.25c.41 0 .75.34.75.75s-.34.75-.75.75-.75-.34-.75-.75.34-.75.75-.75zM19 19H5V5h14v14z"></path>
						</svg>
					</div>

					<div id="post-info-@item.Id" style="display: flex; flex-direction: column; margin-left: 10px; margin-top: -3.5px;">

					@if (item.Type == "Post")
					{
						<h3 style="font-size: 16px; margin-bottom: 0px;">@item.OwnerName ƒë√£ ƒëƒÉng m·ªôt th√¥ng b√°o m·ªõi: @item.Title</h3>
					}
					else
					{
						<h3 style="font-size: 16px; margin-bottom: 0px;">@item.OwnerName ƒë√£ ƒëƒÉng m·ªôt b√†i t·∫≠p m·ªõi: @item.Title</h3>
					}

					@if (item.Type == "Post")
					{
						string content = item.Content;
						string pattern = @"(https?://[a-zA-Z0-9.-]+(?:/[^\s]*)?)"; // Regex nh·∫≠n di·ªán URL ƒë·∫ßy ƒë·ªß v·ªõi ƒë∆∞·ªùng d·∫´n
						var parts = System.Text.RegularExpressions.Regex.Split(content, pattern); // T√°ch n·ªôi dung
						<p style="font-size: 16px; margin-bottom: 0px;">
							@foreach (var part in parts)
							{
								if (System.Text.RegularExpressions.Regex.IsMatch(part, pattern)) // N·∫øu l√† link h·ª£p l·ªá
								{
													<a href="@part" target="_blank" style="color: #007bff; text-decoration: none;">@part</a>
								}
								else // N·∫øu kh√¥ng ph·∫£i l√† link
								{
									@part
								}
							}
						</p>
					}
						<p class="post-created-at" style="font-size: 14px; color: gray; margin-top: 0px;">@item.CreatedAt.ToString("dd/MM/yyyy - HH:mm:ss")</p>
					</div>

					@{
						if (Model.isOwner && item.Type == "Post")
						{
							<div id="post-options-@item.Id" style="margin-left: auto; cursor: pointer; display: flex; align-items: center; height: 100%;">
								<button id="post-options-@item.Id" class="icon">
									<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
										<circle cx="12" cy="5" r="2" fill="gray"></circle>
										<circle cx="12" cy="12" r="2" fill="gray"></circle>
										<circle cx="12" cy="19" r="2" fill="gray"></circle>
									</svg>
								</button>
								<div class="options-menu" style="display: none;">
									<a class="btn-reusesua" href="javascript:void(0);" onclick="showEditForm('@item.Id')">S·ª≠a</a>
									<a class="btn-reusesxoa" asp-action="Delete" asp-controller="Posts" asp-route-id="@item.Id" asp-route-classId="@item.ClassRoomId" onclick="return confirm('B·∫°n c√≥ ch·∫Øc mu·ªën x√≥a kh√¥ng ?')">X√≥a</a>
								</div>
							</div>
							<!-- Form ·∫©n ƒë·ªÉ ch·ªânh s·ª≠a b√†i vi·∫øt -->
							<div id="editForm-@item.Id" style="display: none; margin-top: 10px; width: 100%;">
								<form action="/Posts/Editpost" method="POST">
									<input type="hidden" name="Id" value="@item.Id" />
									<input type="text" name="Title" value="@item.Title" class="form-control" placeholder="Nh·∫≠p ti√™u ƒë·ªÅ" style="margin-bottom: 10px;" />
									<textarea name="Content" rows="4" class="input-textarea" style="width: 100%; border-radius: 5px; margin-top: 10px; padding: 10px;" placeholder="Nh·∫≠p n·ªôi dung">@item.Content</textarea>
									<div style="display: flex; justify-content: flex-end; margin-top: 10px;">
										<button type="button" onclick="hideEditForm('@item.Id')" style="margin-right: 10px;">H·ªßy</button>
										<button type="submit" class="btn btn-success">L∆∞u</button>
									</div>
									<input type="hidden" name="ClassId" id="classIdInput" value="@Model.ClassRoom.Id" />
									<input type="hidden" name="UserId" id="UserIdInput" value="@Model.ClassRoom.UserId" />
								</form>
							</div>
						}
					}
				</div>
			}
		</div>
	</div>
</div>
@* ==================================SCRIPT======================================================*@
<script>
	function switchTab(event, tabId) {
		// Hide all tab contents
		document.querySelectorAll('.tab-content').forEach((tab) => {
			tab.classList.remove('active');
		});

		// Deactivate all tab links
		document.querySelectorAll('.tab-link').forEach((link) => {
			link.classList.remove('active');
		});

		// Show the selected tab content and activate the corresponding link
		document.getElementById(tabId).classList.add('active');
		event.target.classList.add('active');
	}
</script>@* Chuy·ªÉn tap trong reuse*@
<script>
	function openReuseLectureModal(lectureId) {
		// Hide all post lists
		const postLists = document.querySelectorAll('.postList');
		postLists.forEach(postList => {
			postList.style.display = 'none'; // Hide all postLists
		});

		// Show the specific postList related to the clicked button
		const postListToShow = document.getElementById(`postList-${lectureId}`);
		if (postListToShow) {
			postListToShow.style.display = 'block'; // Show the specific postList
		}

		// Hide the main list (you may need to adjust the selector based on your structure)
		const mainList = document.querySelector('.mainList'); // Assuming you wrap your main list in a div with class "mainList"
		if (mainList) {
			mainList.style.display = 'none'; // Hide the main list
		}
	}

	function closeReuseLectureModal(lectureId) {
		// Hide the specific postList when cancel is clicked
		const postListToHide = document.getElementById(`postList-${lectureId}`);
		if (postListToHide) {
			postListToHide.style.display = 'none'; // Hide the postList
		}

		const mainList = document.querySelector('.mainList'); // Again, adjust if necessary
		if (mainList) {
			mainList.style.display = 'block'; // Show the main list
		}
	}
</script>
<script>
	function openReuseModal(assignmentId) {
		// Hide all post lists
		const postLists = document.querySelectorAll('.postList');
		postLists.forEach(postList => {
			postList.style.display = 'none'; // Hide all postLists
		});

		// Show the specific postList related to the clicked button
		const postListToShow = document.getElementById(`assignmentList-${assignmentId}`);
		if (postListToShow) {
			postListToShow.style.display = 'block'; // Show the specific postList
		}

		// Hide the main list (you may need to adjust the selector based on your structure)
		const mainList = document.querySelector('.mainList'); // Assuming you wrap your main list in a div with class "mainList"
		if (mainList) {
			mainList.style.display = 'none'; // Hide the main list
		}
	}

	function closeReuseModal(assignmentId) {
		// Hide the specific postList when cancel is clicked
		const postListToHide = document.getElementById(`assignmentList-${assignmentId}`);
		if (postListToHide) {
			postListToHide.style.display = 'none'; // Hide the postList
		}

		// Optionally show the main list again
		const mainList = document.querySelector('.mainList'); // Again, adjust if necessary
		if (mainList) {
			mainList.style.display = 'block'; // Show the main list
		}
	}
</script>
<script>
	function showPostContent(postId) {
		// Hide all post lists
		const postLists = document.querySelectorAll('.postList');
		postLists.forEach(postList => {
			postList.style.display = 'none'; // Hide all postLists
		});

		// Show the specific postList related to the clicked button
		const postListToShow = document.getElementById(`postList-${postId}`);
		if (postListToShow) {
			postListToShow.style.display = 'block'; // Show the specific postList
		}

		// Hide the main list (you may need to adjust the selector based on your structure)
		const mainList = document.querySelector('.mainList'); // Assuming you wrap your main list in a div with class "mainList"
		if (mainList) {
			mainList.style.display = 'none'; // Hide the main list
		}
	}

	function cancelReuse(postId) {
		// Hide the specific postList when cancel is clicked
		const postListToHide = document.getElementById(`postList-${postId}`);
		if (postListToHide) {
			postListToHide.style.display = 'none'; // Hide the postList
		}

		// Optionally show the main list again
		const mainList = document.querySelector('.mainList'); // Again, adjust if necessary
		if (mainList) {
			mainList.style.display = 'block'; // Show the main list
		}
	}

</script>@*Hi·ªÉn th·ªã n·ªôi dung b√†i post*@
<script>
	function toggleClassSelection() {
		var form = document.getElementById("postContainer");
		// Check display status and toggle visibility
		if (form.style.display === "none" || form.style.display === "") {
			form.style.display = "block"; // Show the form
		} else {
			form.style.display = "none"; // Hide the form
		}
	}

	function closePostContainer() {
		document.getElementById("postContainer").style.display = "none";
	}
</script>
<script>
	function showEditForm(postId) {
		// ·∫®n t·∫•t c·∫£ c√°c form ch·ªânh s·ª≠a kh√°c
		var forms = document.querySelectorAll('[id^="editForm-"]');
		forms.forEach(function (form) {
			form.style.display = 'none';
		});

		// Hi·ªÉn th·ªã form ch·ªânh s·ª≠a cho b√†i vi·∫øt c·ª• th·ªÉ
		var editForm = document.getElementById('editForm-' + postId);
		if (editForm) {
			editForm.style.display = 'block';
		}

		// ·∫®n icon v√† ph·∫ßn th√¥ng tin c·ªßa b√†i vi·∫øt khi hi·ªÉn th·ªã form
		var circleIcon = document.getElementById('circle-icon-' + postId);
		var postInfo = document.getElementById('post-info-' + postId);
		var postOptions = document.getElementById('post-options-' + postId);

		if (circleIcon) {
			circleIcon.style.display = 'none';
		}
		if (postInfo) {
			postInfo.style.display = 'none';
		}
		if (postOptions) {
			postOptions.style.display = 'none';
		}
	}

	function hideEditForm(postId) {
		// ·∫®n form ch·ªânh s·ª≠a khi ng∆∞·ªùi d√πng nh·∫•n n√∫t H·ªßy
		var editForm = document.getElementById('editForm-' + postId);
		if (editForm) {
			editForm.style.display = 'none';
		}

		// Hi·ªÉn th·ªã l·∫°i icon v√† ph·∫ßn th√¥ng tin c·ªßa b√†i vi·∫øt khi ·∫©n form
		var circleIcon = document.getElementById('circle-icon-' + postId);
		var postInfo = document.getElementById('post-info-' + postId);
		var postOptions = document.getElementById('post-options-' + postId);

		if (circleIcon) {
			circleIcon.style.display = 'flex'; // ƒê·∫∑t l·∫°i display th√†nh flex
		}
		if (postInfo) {
			postInfo.style.display = 'flex'; // ƒê·∫∑t l·∫°i display th√†nh flex
		}
		if (postOptions) {
			postOptions.style.display = 'flex'; // ƒê·∫∑t l·∫°i display th√†nh flex
		}
	}
</script>@*form s·ª≠a*@
<script>
	const iconButtons = document.querySelectorAll('.icon'); // Ch·ªçn t·∫•t c·∫£ c√°c ph·∫ßn t·ª≠ c√≥ class "icon"

	iconButtons.forEach((iconButton) => {
		const optionsMenu = iconButton.nextElementSibling; // Menu li·ªÅn k·ªÅ v·ªõi icon

		// S·ª± ki·ªán click ƒë·ªÉ hi·ªÉn th·ªã ho·∫∑c ·∫©n menu
		iconButton.addEventListener('click', (event) => {
			event.stopPropagation();

			// ƒê√≥ng t·∫•t c·∫£ c√°c menu tr∆∞·ªõc khi m·ªü menu c·ªßa icon hi·ªán t·∫°i
			document.querySelectorAll('.options-menu').forEach(menu => {
				menu.style.display = 'none';
			});

			// Chuy·ªÉn ƒë·ªïi hi·ªÉn th·ªã c·ªßa menu li·ªÅn k·ªÅ
			optionsMenu.style.display = optionsMenu.style.display === 'none' || optionsMenu.style.display === '' ? 'block' : 'none';
		});
	});

	// ƒê√≥ng menu n·∫øu nh·∫•p ra ngo√†i
	document.addEventListener('click', () => {
		document.querySelectorAll('.options-menu').forEach(menu => {
			menu.style.display = 'none';
		});
	});
</script>@*option x√≥a & s·ª≠a*@
<script>
	function expandContent() {
		const expandableForm = document.getElementById('expandable-form');
		const uploadPostForm = document.getElementById('uploadpost');
		const notifyText = document.querySelector('.notify-text'); // D√≤ng th√¥ng b√°o
		const circleIcon = document.querySelector('.circle-icon'); // Icon h√¨nh tr√≤n
		const Icon = document.querySelector('.icon');

		expandableForm.style.display = 'block'; // Hi·ªán form
		uploadPostForm.style.display = 'block'; // Hi·ªán to√†n b·ªô form
		notifyText.style.display = 'none'; // ·∫®n d√≤ng text
		circleIcon.style.display = 'none'; // ·∫®n icon h√¨nh tr√≤n
		Icon.style.display = 'none';
	}

	function cancelInput() {
		const expandableForm = document.getElementById('expandable-form');
		const uploadPostForm = document.getElementById('uploadpost');
		const notifyText = document.querySelector('.notify-text'); // D√≤ng th√¥ng b√°o
		const circleIcon = document.querySelector('.circle-icon'); // Icon h√¨nh tr√≤n
		const Icon = document.querySelector('.icon');

		expandableForm.style.display = 'none'; // Hi·ªán form
		uploadPostForm.style.display = 'none'; // Hi·ªán to√†n b·ªô form
		notifyText.style.display = 'block'; // ·∫®n d√≤ng text
		circleIcon.style.display = 'flex'; // ·∫®n icon h√¨nh tr√≤n
		Icon.style.display = 'flex';
	}

	function checkInput() {
		const titleInput = document.getElementById('titleInput').value.trim();
		const contentInput = document.getElementById('inputText').value.trim();
		const submitButton = document.getElementById('submitButton');

		if (titleInput === '' && contentInput === '') {
			submitButton.disabled = true;
			submitButton.classList.remove('active-button');
			submitButton.classList.add('disabled-button');
		} else {
			submitButton.disabled = false;
			submitButton.classList.remove('disabled-button');
			submitButton.classList.add('active-button');
		}
	}


	function submitInput() {
		document.getElementById('uploadpost').submit();
	}
</script>@*post*@
<script>
	function openTab(evt, tabName) {
		var i, tabcontent, tablinks;
		tabcontent = document.getElementsByClassName("tabcontent");
		tablinks = document.getElementsByClassName("tab");

		// Ki·ªÉm tra n·∫øu tab hi·ªán t·∫°i ƒëang m·ªü
		var currentOpenTab = document.querySelector(".tabcontent[style='display: block;']");
		if (currentOpenTab && currentOpenTab.id === tabName) {
			// N·∫øu tab ƒë√£ m·ªü v√† nh·∫•p l·∫°i th√¨ ƒë√≥ng tab ƒë√≥ v√† hi·ªán tab 'mainload'
			currentOpenTab.style.display = "none";
			document.getElementById('mainload').style.display = "block";
			evt.currentTarget.classList.remove("active");
		} else {
			// ·∫®n t·∫•t c·∫£ c√°c tab tr∆∞·ªõc
			for (i = 0; i < tabcontent.length; i++) {
				tabcontent[i].style.display = "none";
			}
			// Lo·∫°i b·ªè class 'active' t·ª´ t·∫•t c·∫£ c√°c tablinks
			for (i = 0; i < tablinks.length; i++) {
				tablinks[i].classList.remove("active");
			}
			// Hi·ªÉn th·ªã tab ƒë∆∞·ª£c ch·ªçn v√† th√™m class 'active'
			document.getElementById(tabName).style.display = "block";
			evt.currentTarget.classList.add("active");
		}
	}

	document.addEventListener("DOMContentLoaded", function () {
		openTab(event, 'mainload'); // M·ªü tab mainload khi t·∫£i trang
	});

</script> @* Chuy?n tab tr√™n trang *@
<script>
	function reloadLecture() {
		var xhr = new XMLHttpRequest();
		xhr.open('GET', '/ClassRooms/GetLecture?ClassId=' + encodeURIComponent(document.getElementById('classIdInput').value), true);
		xhr.onload = function () {
			if (xhr.status === 200) {
				// L?y d? li?u m?i t? ph?n h?i AJAX
				var newData = xhr.responseText;

				// C?p nh?t n?i dung c?a ph?n t? tr√™n trang web
				document.getElementById('lectureContainer').innerHTML = newData;
			} else {
				// X? l√Ω l?i
				console.error('Error:', xhr.statusText);
			}
		};
		xhr.send();
	}
</script> @* T?o b√†i gi?ng m?i *@
<script src="https://apis.google.com/js/api.js"></script>
<script>
	function validateAndSubmit(requiredFormat, assignmentId, event) {
		event.preventDefault();
		var form = event.target; // L?y bi?u m?u t? s? ki?n
		var fileInput = form.querySelector("input[type='file']");
		var fileName = fileInput.value;

		if (requiredFormat.toLowerCase() === 'allfile') {
			// N?u t√πy ch?n "allfile" du?c ch?n, kh√¥ng c?n ki?m tra d?nh d?ng file
			if (fileName === '') {
				// N?u kh√¥ng ch?n file, hi?n th? th√¥ng b√°o l?i
				alert("Vui l√≤ng ch·ªçn 1 file ƒë·ªÉ n·ªôp.");
				return false; // Ngan form du?c g?i di
			}
			// N?u d√£ ch?n file, cho ph√©p form du?c g?i di
			form.submit(); // G?i form di
		} else {
			// Ki?m tra d?nh d?ng file n?u kh√¥ng ph?i l√† "allfile"
			var fileExtension = fileName.split('.').pop().toLowerCase();
			// Ki?m tra xem d?nh d?ng file c√≥ ph√π h?p kh√¥ng
			if (fileExtension === requiredFormat.toLowerCase()) {
				// N?u d√∫ng d?nh d?ng, ti?n h√†nh n?p b√†i
				form.submit(); // G?i form di
			} else {
				// N?u kh√¥ng d√∫ng d?nh d?ng, hi?n th? th√¥ng b√°o l?i
				alert("ƒê·ªãnh d·∫°ng file kh√¥ng ƒë√∫ng. Vui l√≤ng ch·ªçn file c√≥ ƒë·ªãnh d·∫°ng " + requiredFormat);
			}
		}
	}



	function previewFile(assignmentId) {
		var fileInput = document.getElementById('FileInput_' + assignmentId);
		var file = fileInput.files[0];
		var fileURL = URL.createObjectURL(file);
		window.open(fileURL, '_blank');
	}
</script> @* N?p b√†i t?p theo d?nh d?ng file y√™u c?u *@
<script>
	function Showtaobaitap() {
		var uploadButton = document.getElementById("uploadButton");
		uploadButton.style.display = "none"; // ?n button khi form du?c hi?n th?

		var uploadForm = document.getElementById("uploadbaitap");
		uploadForm.style.display = "block"; // Hi?n th? form khi n√∫t du?c nh?n

		// Hi?n th? ph?n nh?p ti√™u d?
		var titleInput = document.getElementById("titleInput");
		titleInput.style.display = "block";

		// Hi?n th? ph?n nh?p m√¥ t?
		var descriptionInput = document.getElementById("descriptionInput");
		descriptionInput.style.display = "block";

		var attachmentForm = document.getElementById("attachmentForm");
		attachmentForm.style.display = "block"; // Hi?n th? form d√≠nh k√®m
	}

	document.querySelector('.close-btn').addEventListener('click', () => {
		document.getElementById("uploadbaitap").style.display = "none"; 
		document.getElementById("uploadButton").style.display = "block";
	});

</script> @* T?o b√†i t?p m?i *@
<script>
	async function calculateChunkHash(chunk) {
		const arrayBuffer = await chunk.arrayBuffer();
		const wordArray = CryptoJS.lib.WordArray.create(arrayBuffer);
		return CryptoJS.SHA256(wordArray).toString();
	}

	async function calculateFileHash(file) {
		const chunkSize = 10 * 1024 * 1024; // 10 MB
		const chunkCount = Math.ceil(file.size / chunkSize);
		const sha256 = CryptoJS.algo.SHA256.create();

		for (let i = 0; i < chunkCount; i++) {
			const start = i * chunkSize;
			const end = Math.min(start + chunkSize, file.size);
			const chunk = file.slice(start, end);
			const arrayBuffer = await chunk.arrayBuffer();
			const wordArray = CryptoJS.lib.WordArray.create(arrayBuffer);
			sha256.update(wordArray);
		}

		return sha256.finalize().toString();
	}

	function showModal() {
		const modal = document.getElementById('uploadModal');
		const backdrop = document.getElementById('modalBackdrop');
		modal.classList.add('show');
		backdrop.classList.add('show');
	}

	function hideModal() {
		const modal = document.getElementById('uploadModal');
		const backdrop = document.getElementById('modalBackdrop');
		modal.classList.remove('show');
		backdrop.classList.remove('show');
	}

	function showSuccessMessage() {
		const progressText = document.getElementById('progressText');
		const successText = document.getElementById('successText');
		progressText.style.display = 'none';
		successText.style.display = 'block';
	}

	function resetProgress() {
		const progressText = document.getElementById('progressText');
		const successText = document.getElementById('successText');
		const progressBar = document.getElementById('progressBar');
		const loader = document.getElementById('loader');
		loader.style.display = 'block';
		progressBar.style.display = 'none';


		progressBar.value = 0;
		progressText.innerText = '0%';
		progressText.style.display = 'block';
		successText.style.display = 'none';
	}


	async function uploadFile() {
		const attactURL = document.getElementById('attactURL');
		const fileInput = document.getElementById('fileInput');
		const file = fileInput.files[0];
		if (!file) {
			alert('Please select a file.');
			return;
		}


		showModal();

		const fileHash = await calculateFileHash(file);
		console.log('File hash:', fileHash); // Log the file hash

		const showProgress = document.getElementById('progressBar');
		const loader = document.getElementById('loader');
		loader.style.display = 'none';
		showProgress.style.display = 'block';

		const chunkSize = 10 * 1024 * 1024; // 10 MB
		const chunkCount = Math.ceil(file.size / chunkSize);
		let uploadedChunks = 0;

		function updateProgress(uploadedChunks, chunkCount) {
			const percentage = (uploadedChunks / chunkCount) * 100;
			document.getElementById('progressBar').value = percentage;
			document.getElementById('progressText').innerText = `${percentage.toFixed(2)}%`;
		}

		async function uploadChunk(chunk, index, fileName) {
			const chunkHash = await calculateChunkHash(chunk);
			return new Promise((resolve, reject) => {
				const xhr = new XMLHttpRequest();
				xhr.open('POST', '/ClassRooms/UploadChunk', true);
				xhr.onload = function () {
					if (xhr.status === 200) {
						uploadedChunks++;
						updateProgress(uploadedChunks, chunkCount);
						resolve();
					} else {
						reject(new Error(`Error uploading chunk: ${xhr.responseText}`));
					}
				};
				xhr.onerror = function () {
					reject(new Error('Network error while uploading chunk'));
				};

				const formData = new FormData();
				formData.append('chunk', chunk);
				formData.append('index', index);
				formData.append('fileName', fileName);
				formData.append('chunkHash', chunkHash);
				xhr.send(formData);
			});
		}

		async function uploadChunks() {
			for (let i = 0; i < chunkCount; i++) {
				const start = i * chunkSize;
				const end = Math.min(start + chunkSize, file.size);
				const chunk = file.slice(start, end);
				try {
					await uploadChunk(chunk, i, file.name);
				} catch (error) {
					console.error(error);
					alert('Error uploading file. Please try again.');
					return;
				}
			}
			completeUpload(file.name, fileHash);
		}

		function completeUpload(fileName, fileHash) {
			const xhr = new XMLHttpRequest();
			xhr.open('POST', '/ClassRooms/CompleteUpload', true);
			xhr.setRequestHeader('Content-Type', 'application/json;charset=UTF-8');
			xhr.onload = function () {
				if (xhr.status === 200) {
					attactURL.value = fileName;

					showSuccessMessage();
					setTimeout(hideModal, 2000);
					setTimeout(resetProgress, 3000);
					document.getElementById('TenFile').innerHTML = `<a href="/Uploads/BAITAP/${fileName}" target="_blank" >${fileName}</a>`

				} else {
					console.error('Error completing upload:', xhr.responseText);
				}
			};
			xhr.onerror = function () {
				console.error('Network error while completing upload');
			};

			const request = JSON.stringify({ fileName: fileName, fileHash: fileHash });
			xhr.send(request);
		}

		uploadChunks();
	}
</script> @*Upload file l·ªõn*@
<script>
	// L?ng nghe s? ki?n khi ng√†y deadline thay d?i
	document.getElementById("deadlineInput").addEventListener("change", function () {
		// L?y gi√° tr? c?a ng√†y deadline
		var deadline = this.value;
	});
</script> @* Ch·ªçn deadline *@
<script src="~/js/signalr/dist/browser/signalr.js"></script>
<script src="~/js/chat.js"></script>
<script src="https://cdn.jsdelivr.net/npm/he@1.2.0/he.min.js"></script>
<script>
	document.addEventListener("DOMContentLoaded", async function () {
		console.log(document.getElementById('FileInput'));
		const connection = new signalR.HubConnectionBuilder()
			.withUrl("/chathub")
			.build();

		connection.onclose(function () {
			console.log("SignalR connection closed.");
		});

		connection.start().then(function () {
			console.log("SignalR connected successfully.");
		}).catch(function (err) {
			return console.error("SignalR connection error:", err.toString());
		});
		try {
			var encodedName = "@((await _userManager.GetUserAsync(User)).Name)";
			var decodedName = he.decode(encodedName);
			document.getElementById("userInput").value = (@User.Identity.Name + " _ " + decodedName);
		} catch (error) {
		}
	});

	function encodeHTML(str) {
		var div = document.createElement('div');
		div.appendChild(document.createTextNode(str));
		return div.innerHTML;
	}

	connection.on("ReceiveMessage", function (user, message, fileUrl, urlavt) {
		var li = document.createElement("li");
		var classId = document.getElementById("classId").value;

		const currentTime = new Date();
		const year = currentTime.getFullYear();
		const month = currentTime.getMonth() + 1;
		const day = currentTime.getDate();
		const hours = currentTime.getHours();
		const minutes = currentTime.getMinutes();
		const seconds = currentTime.getSeconds();
		const formatTime = `${hours}:${minutes}:${seconds} - ${day}/${month}/${year}`;

		var encodedUser = encodeHTML(user);
		var encodedMessage = encodeHTML(message);

		var nameElement = document.createElement("h3");
		nameElement.style.cssText = "font-size: 18px; font-weight: 600; margin: 0;";
		nameElement.textContent = encodedUser;

		var messageElement = document.createElement("p");
		messageElement.style.cssText = "font-size: 17px; margin: 0;";
		messageElement.textContent = encodedMessage;

		var timeElement = document.createElement("p");
		timeElement.style.cssText = "font-size: 13px; margin-top: 5px; margin: 0;";
		timeElement.textContent = `(${formatTime})`;

		if (fileUrl) {
			var fileLink = document.createElement("a");
			fileLink.href = fileUrl;
			fileLink.target = "_blank";
			fileLink.textContent = "[Open File]";
			messageElement.appendChild(fileLink);
		}

		var avatarElement = document.createElement("img");
		avatarElement.style.cssText = "width: 100%; height: 100%; object-fit: cover;border-radius: 50%";
		avatarElement.src = `/Imgs_avtUser/${urlavt}`;
		avatarElement.alt = "Avatar";

		var avatarBox = document.createElement("div");
		avatarBox.classList.add("avatar");
		avatarBox.style.cssText = "width: 50px; height: 50px; background-color: #ddd; border-radius: 50%; text-align: center; line-height: 40px; margin-left: 10px; font-size: 18px; font-weight: bold; color: #555;";
		avatarBox.appendChild(avatarElement);

		var messageBox = document.createElement("div");
		messageBox.classList.add("message-box");
		messageBox.appendChild(nameElement);
		messageBox.appendChild(messageElement);
		messageBox.appendChild(timeElement);


		li.style.cssText = "font-family: 'JetBrains Mono', serif; ";


		var userInput = document.getElementById("userInput").value;
		if (encodedUser === userInput) {
			// N·∫øu ng∆∞·ªùi g·ª≠i l√† ng∆∞·ªùi hi·ªán t·∫°i, hi·ªÉn th·ªã b√™n tr√°i (current-user)
			li.classList.add("current-user");

		} else {
			li.classList.add("other-user");
			li.appendChild(avatarBox);
		}
		li.appendChild(messageBox);
		const messagesList = document.querySelector(".message-list");
		messagesList.appendChild(li);

		setTimeout(() => {
			messagesList.scrollTop = messagesList.scrollHeight;
		}, 0);

	});

	function getCurrentTime() {
		const currentTime = new Date();
		const year = currentTime.getFullYear();
		const month = currentTime.getMonth() + 1;
		const day = currentTime.getDate();
		const hours = currentTime.getHours();
		const minutes = currentTime.getMinutes();
		const seconds = currentTime.getSeconds();
		return `${hours}:${minutes}:${seconds} - ${day}/${month}/${year}`;
	}

	function getClassId() {
		return document.getElementById("classId").value;
	}

	async function sendMessage() {
		var user = document.getElementById("userInput").value;
		var message = document.getElementById("messageInput").value;
		var classId = document.getElementById("classId").value;
		var formatTime = getCurrentTime();
		var FileInput = document.getElementById("FileInput");
		var fileUrl = null;
		var Urlavt = "@((await _userManager.GetUserAsync(User))?.UrlAvt)";
		if (FileInput.files.length > 0) {
			var file = FileInput.files[0];

			var formData = new FormData();
			formData.append("file", file);

			try {
				console.log("ƒêang g·ª≠i file t·ªõi API...");
				let response = await fetch('/api/upfilemessage', {
					method: 'POST',
					body: formData
				});

				if (response.ok) {
					fileUrl = await response.text();
				} else {
					console.error('L·ªói khi upload file.');
					return;
				}
			} catch (err) {
				console.error('L·ªói khi g·ª≠i file: ' + err.toString());
				return;
			}
		}
		if (message.trim() !== "" || fileUrl) {
			try {
				await connection.invoke("SendMessage", user, message, formatTime, classId, Urlavt, fileUrl).catch(function (err) {
					console.error("L·ªói khi g·ª≠i tin nh·∫Øn:", err.toString());
				});

				// X√≥a n·ªôi dung sau khi g·ª≠i
				document.getElementById("messageInput").value = '';
				FileInput.value = '';
			} catch (err) {
				console.error("L·ªói khi g·ª≠i tin nh·∫Øn:", err.toString());
			}
		}
	}

	document.getElementById('FileInput').addEventListener('change', function () {
		var fileInput = document.getElementById('FileInput');
		var fileNameSpan = document.getElementById('messageInput');

		if (fileInput.files.length > 0) {
			const fileName = fileInput.files[0].name; // L·∫•y t√™n file

			// Hi·ªÉn th·ªã t√™n file trong khung nh·∫≠p tin nh·∫Øn
			if (messageInput.value.trim() === '') {
				messageInput.value = fileName; // N·∫øu khung tr·ªëng, hi·ªÉn th·ªã t√™n file
			} else {
				messageInput.value += ` [${fileName}]`; // N·∫øu c√≥ n·ªôi dung, th√™m t√™n file v√†o sau
			}
		} else {
			console.log('Kh√¥ng c√≥ file n√†o ƒë∆∞·ª£c ch·ªçn.');
		}
	});


	document.getElementById("sendButton").addEventListener("click", async function (event) {
		await sendMessage();
	});

	document.getElementById("messageInput").addEventListener("keydown", async function (event) {
		if (event.key == 'Enter' && !event.shiftKey) {
			event.preventDefault();
			await sendMessage();
		}
	});

	window.onload = function () {
		const messagesList = document.querySelector(".message-list");

		if (messagesList) {
			// Cu·ªôn thanh tr∆∞·ª£t xu·ªëng cu·ªëi
			messagesList.scrollTop = messagesList.scrollHeight;
		}
	};


</script> @* G?i tin nh?n *@
<script>
	function getListSV() {
		var classId = document.getElementById("classId").value;
		$.ajax({
			url: '/ClassRooms/GetListSV?classId=' + classId,
			type: 'GET',
			dataType: 'json',
			success: function (response) {
				if (response.success) {
					displaySV(response.students);
				} else {
					console.error('Error fetching student list:', response.error);
				}
			},
			error: function (xhr, status, error) {
				console.error('Error fetching student list:', error);
			}
		});
	}


	$(document).ready(function () {
		getListSV();
	});

	function openPopup(name, mssv, email, urlAvt) {
		document.getElementById("student-name").textContent = name;
		document.getElementById("student-mssv").textContent = mssv;
		document.getElementById("student-email").textContent = email;

		const imageElement = document.getElementById("student-image");
		imageElement.src = `/Imgs_avtUser/${urlAvt}`;
		imageElement.alt = `Image of ${name}`;

		document.getElementById("popup").style.display = "block";
	}

	function closePopup() {
		document.getElementById("popup").style.display = "none";
	}

</script>@*ch·ªçn nh√≥m*@
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
@{
	var settings = new Newtonsoft.Json.JsonSerializerSettings
			{
				ReferenceLoopHandling = Newtonsoft.Json.ReferenceLoopHandling.Ignore
			};
	var serializedListUserGroup = Newtonsoft.Json.JsonConvert.SerializeObject(ViewBag.ListUserGroup, settings);
}
<script>
	const listUserGroup = @Html.Raw(serializedListUserGroup);
	const currentUser = '@user.Id';
</script>

<script>
	function getListStudents() {
		var classId = document.getElementById("classId").value;
		$.ajax({
			url: '/ClassRooms/GetListSV?classId=' + classId,
			type: 'GET',
			dataType: 'json',
			success: function (response) {
				if (response.success) {
					displayStudents(response.students);
				} else {
					console.error('Error fetching student list:', response.error);
				}
			},
			error: function (xhr, status, error) {
				console.error('Error fetching student list:', error);
			}
		});
	}

	function displayStudents(students) {
		var listHtml = '<div class="container_listsv">';
		var tongslsv = students.length;
		listHtml += '<p class="header_listsv">Sƒ© s·ªë : ' + tongslsv + ' sinh vi√™n</p>';
		listHtml += '<hr class="hr_listsv">';

		listHtml += '<div class="row_listsv">';
		students.forEach(function (student) {
			listHtml += '<div class="card_listsv">';
			listHtml += '<img class="img_listsv" src="/Imgs_avtUser/' + student.urlAvt + '" alt="No Image">';
			listHtml += '<p class="p_listsv">' + student.mssv + '</p>';
			listHtml += '<p class="p_listsv">' + student.name + '</p>';

			// Ki·ªÉm tra n·∫øu student.id tr√πng v·ªõi userid ƒëang ƒëƒÉng nh·∫≠p
			if (String(student.id) === String(currentUser)) {
				// Kh√¥ng hi·ªÉn th·ªã n√∫t n·∫øu l√† user ƒëang ƒëƒÉng nh·∫≠p
				listHtml += '</div>'; // K·∫øt th√∫c s·ªõm
				return; // Ti·∫øp t·ª•c v√≤ng l·∫∑p
			}

			// Ki·ªÉm tra xem sinh vi√™n c√≥ trong danh s√°ch nh√≥m hay kh√¥ng
			if (listUserGroup !== null) {
				const isInGroup = listUserGroup.some(item => item.UserId === student.id);
				if (isInGroup) {
					listHtml += '<button class="invite_button" style="background-color: green;">B·∫°n c√πng nh√≥m</button>';
				} else {
					listHtml += '<button class="invite_button" onclick="sendInvite(\'' + student.id + '\')">B·∫°n kh√¥ng c√πng nh√≥m</button>';
				}
			} else {
				listHtml += '<button class="invite_button" onclick="sendInvite(\'' + student.id + '\')">G·ª≠i l·ªùi m·ªùi t·∫°o nh√≥m</button>';
			}

			listHtml += '</div>';
		});


		listHtml += '</div>';

		listHtml += '</div>';
		$('#listsv1').html(listHtml);;
	}
	function filterStudents() {
		var input = document.getElementById('searchsvInput');
		var filter = input.value.toLowerCase(); // Chuy·ªÉn v·ªÅ ch·ªØ th∆∞·ªùng ƒë·ªÉ so s√°nh
		var container = document.querySelector('.row_listsv');
		var cards = container.getElementsByClassName('card_listsv'); // L·∫•y t·∫•t c·∫£ c√°c card sinh vi√™n

		for (var i = 0; i < cards.length; i++) {
			var name = cards[i].querySelector('.p_listsv:nth-child(3)').textContent.toLowerCase(); // L·∫•y t√™n sinh vi√™n
			var mssv = cards[i].querySelector('.p_listsv:nth-child(2)').textContent.toLowerCase(); // L·∫•y MSSV
			// Hi·ªÉn th·ªã ho·∫∑c ·∫©n d·ª±a tr√™n k·∫øt qu·∫£ t√¨m ki·∫øm
			if (name.includes(filter) || mssv.includes(filter)) {
				cards[i].style.display = ''; // Hi·ªÉn th·ªã
			} else {
				cards[i].style.display = 'none'; // ·∫®n
			}
		}
	}

	async function sendInvite(targetUserId) {
		if (!targetUserId) {
			alert("Please enter a friend ID.");
			return; // D·ª´ng l·∫°i n·∫øu kh√¥ng c√≥ ID
		}
		var classId = document.getElementById("classId").value;
		try {
			const response = await fetch("/Notifications/SendFriendRequest", {
				method: "POST",
				headers: {
					"Content-Type": "application/json",
				},
				body: JSON.stringify({ targetUserId: targetUserId, classid: classId }),
			});

			if (!response.ok) {
				const errorData = await response.json();
				console.error("Error:", errorData.message);
				alert(`Failed: ${errorData.message}`);
				return;
			}

			const data = await response.json();
			toastr.success(data.message, 'Th√†nh c√¥ng', { timeOut: 3000 });
		} catch (error) {
			console.error("Unexpected Error:", error);
			alert("An unexpected error occurred.");
		}

	}

	$(document).ready(function () {
		getListStudents();
	});
</script> @* L?y dssv trong l?p v√† hi?n th? l√™n *@
<script>
	function updateDateTime() {
		var currentDateTime = new Date();
		var hours = currentDateTime.getHours();
		var minutes = currentDateTime.getMinutes();
		var seconds = currentDateTime.getSeconds();
		var day = currentDateTime.getDate();
		var month = currentDateTime.getMonth() + 1; // Th√°ng b?t d?u t? 0
		var year = currentDateTime.getFullYear();
		var weekday = currentDateTime.getDay();

		hours = (hours < 10) ? "0" + hours : hours;
		minutes = (minutes < 10) ? "0" + minutes : minutes;
		seconds = (seconds < 10) ? "0" + seconds : seconds;

		day = (day < 10) ? "0" + day : day;
		month = (month < 10) ? "0" + month : month;

		var weekdays = ["Sunday", "Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday"];
		var weekdayName = weekdays[weekday];

		// √ê?nh d?ng th?i gian
		var formattedDateTime = weekdayName + " ‚Ä¢ " + day + "/" + month + "/" + year + " " + hours + ":" + minutes + ":" + seconds;

		// Hi?n th? th?i gian
		document.getElementById("currentDateTime").innerText = formattedDateTime;
	}

	// C?p nh?t th?i gian m?i gi√¢y
	setInterval(updateDateTime, 1000);

	// G?i h√†m updateDateTime l?n d?u ti√™n d? hi?n th? th?i gian ngay t? khi trang du?c t?i
	updateDateTime();
</script> @* T?o d?ng h? *@

<script>
	const btnCopy = document.getElementById("btnCopy");
	const input = document.getElementById("contentcopy");
	const icon = document.getElementById("icon");

	btnCopy.addEventListener('click', async () => {
		if (!input.value) {
			return;
		}

		try {
			await navigator.clipboard.writeText(input.value);
			toastr.info('Copied', '', { timeOut: 3000 });
			icon.textContent = 'check_circle';  // Change icon to check mark
			setTimeout(() => {
				icon.textContent = 'content_copy';  // Revert back to copy icon after 2 seconds
			}, 2000);
		} catch (err) {
			console.error('Failed to copy text: ', err);
		}
	});
</script>
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script>
	$(document).ready(function () {
		$('#diemDanhBtn').on('click', function (event) {
			event.preventDefault(); // Prevent the default link action
			var classId = document.getElementById("classId").value;
			var roomOnlineUrl = $(this).attr('href');


			$.post("/ClassRooms/DiemDanhIn", { classId: classId }, function (data) {
				if (data.success) {
					console.log('ƒêi·ªÉm danh th√†nh c√¥ng');
					window.open(roomOnlineUrl, '_blank');
				}
				else {
					console.log(data.error);
					alert(data.error);
					console.log('ƒêi·ªÉm danh th·∫•t b·∫°i');
				}
			});
		});
	});
</script> @* √êi?m danh *@
<script src="~/js/resumable.js"></script>
<script>
	// T·∫°o ƒë·ªëi t∆∞·ª£ng Resumable.js
	var r = new Resumable({
		target: '/upload/UploadChunk',
		chunkSize: 1 * 1024 * 1024, // 1MB m·ªói chunk
		simultaneousUploads: 3,
		testChunks: true,
		throttleProgressCallbacks: 1,
		query: {} // Th√™m tham s·ªë sau khi ng∆∞·ªùi d√πng ch·ªçn th∆∞ m·ª•c
	});
	// Bi·∫øn ƒë·ªÉ theo d√µi tr·∫°ng th√°i t√™n file
	var fileNameSet = false;

	// H√†m g√°n s·ª± ki·ªán cho button
	function setupBrowseButton(buttonId, folderType) {
		var button = document.getElementById(buttonId);
		var classId = document.getElementById("classId").value;
		r.assignBrowse(button); // G√°n s·ª± ki·ªán ch·ªçn file cho button

		button.addEventListener('click', function () {
			// ƒê·∫∑t th∆∞ m·ª•c
			r.opts.query.folderType = folderType;
			r.opts.query.ClassId = classId;

			// N·∫øu l√† BAIGIANG v√† ch∆∞a nh·∫≠p t√™n file
			if (folderType === 'BAIGIANG' && !fileNameSet) {
				var customFileName = prompt("Nh·∫≠p t√™n file cho BAIGIANG:");
				if (customFileName) {
					r.opts.query.fileName = customFileName; // ƒê·∫∑t t√™n file
					fileNameSet = true; // ƒê√°nh d·∫•u l√† ƒë√£ nh·∫≠p t√™n
				} else {
					alert("T√™n file kh√¥ng th·ªÉ ƒë·ªÉ tr·ªëng. Upload b·ªã h·ªßy."); // Th√¥ng b√°o n·∫øu kh√¥ng nh·∫≠p t√™n
					return; // D·ª´ng h√†m n·∫øu kh√¥ng c√≥ t√™n
				}
			}
		});

		// L·∫Øng nghe s·ª± ki·ªán khi file ƒë∆∞·ª£c th√™m v√† b·∫Øt ƒë·∫ßu upload
		r.on('fileAdded', function (file) {
			// Ki·ªÉm tra ƒë·ªãnh d·∫°ng file
			var fileExtension = file.fileName.split('.').pop().toLowerCase();
			if (fileExtension !== 'pdf') {
				alert("Ch·ªâ ƒë∆∞·ª£c ph√©p upload file PDF. Upload b·ªã h·ªßy.");
				r.removeFile(file); // Lo·∫°i b·ªè file kh√¥ng h·ª£p l·ªá kh·ªèi danh s√°ch
				return;
			}

			console.log('B·∫Øt ƒë·∫ßu upload file:', file.fileName);
			r.upload(); // B·∫Øt ƒë·∫ßu upload
		});
	}

	// H√†m ƒë·ªÉ reset t√™n file
	function resetFileName() {
		r.opts.query.fileName = null; // Reset t√™n file
		fileNameSet = false; // ƒê·∫∑t l·∫°i tr·∫°ng th√°i
	}

	// G·ªçi h√†m reset khi c·∫ßn, v√≠ d·ª•: th√™m m·ªôt n√∫t reset

	// Thi·∫øt l·∫≠p c√°c button

	setupBrowseButton('browseBaiGiang', 'BAIGIANG');

	// L·∫Øng nghe ti·∫øn tr√¨nh upload
	r.on('fileProgress', function (file) {
		var progress = Math.floor(file.progress() * 100);
		document.getElementById('progressBar').innerText = 'Ti·∫øn tr√¨nh: ' + progress + '%';
		const progressBar = document.getElementById('progressBar_btnBaiGiang');
		const txtUpload = document.querySelector('.txt-upload_btnBaiGiang');
		const borderbtn = document.querySelector('.border_btnBaiGiang');

		setTimeout(() => {
			txtUpload.innerText = 'Uploading...';
		}, 1000);
		// C·∫≠p nh·∫≠t vi·ªÅn xanh theo ti·∫øn tr√¨nh
		if (progressBar) {
			borderbtn.style.display = 'none';
			progressBar.style.strokeDasharray = `${progress} ${100 - progress}`;
			txtUpload.innerText = progress + '%';
		}
	});

	// X·ª≠ l√Ω khi ho√†n th√†nh upload
	r.on('fileSuccess', function (file, message) {
		console.log('Ho√†n th√†nh upload file:', file.fileName);
		const progressBar = document.getElementById('progressBar_btnBaiGiang');
		const button = document.querySelector('.button_btnBaiGiang');
		const txtUpload = document.querySelector('.txt-upload_btnBaiGiang');
		const borderbtn = document.querySelector('.border_btnBaiGiang');

		// ƒê·∫∑t stroke-dasharray th√†nh 100% khi ho√†n th√†nh
		if (progressBar) {
			progressBar.style.strokeDasharray = `100 0`;
			txtUpload.innerText = 'Ho√†n th√†nh';
		}

		resetFileName()
		// Ch·ªù 2 gi√¢y tr∆∞·ªõc khi reload lecture
		setTimeout(() => {
			reloadLecture();
			// ƒê·∫∑t l·∫°i tr·∫°ng th√°i button v·ªÅ m·∫∑c ƒë·ªãnh
			if (button && txtUpload) {
				button.classList.remove('focus'); // X√≥a tr·∫°ng th√°i focus n·∫øu c√≥
				borderbtn.style.display = 'block';
				txtUpload.innerText = 'Upload';
				txtUpload.style.opacity = '1'; // Hi·ªÉn th·ªã l·∫°i text "Upload"
				progressBar.style.strokeDasharray = `0 100`; // Reset progress bar
			}
		}, 2000);
	});

	// X·ª≠ l√Ω l·ªói
	r.on('fileError', function (file, message) {
		console.error('L·ªói khi upload file:', file.fileName, message);
	});
</script> @*Truy·ªÅn file l·ªõn BAIGIANG*@
<script>
	function startSpeechRecognition() {
		// Ki·ªÉm tra n·∫øu tr√¨nh duy·ªát h·ªó tr·ª£ API Nh·∫≠n d·∫°ng gi·ªçng n√≥i
		const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;

		if (!SpeechRecognition) {
			alert("Tr√¨nh duy·ªát c·ªßa b·∫°n kh√¥ng h·ªó tr·ª£ t√≠nh nƒÉng nh·∫≠n d·∫°ng gi·ªçng n√≥i");
			return;
		}

		const recognition = new SpeechRecognition(); // T·∫°o m·ªôt ƒë·ªëi t∆∞·ª£ng nh·∫≠n d·∫°ng gi·ªçng n√≥i
		recognition.lang = 'vi-VN'; // Thi·∫øt l·∫≠p ng√¥n ng·ªØ l√† ti·∫øng Vi·ªát

		recognition.onresult = function (event) {
			const transcript = event.results[0][0].transcript; // L·∫•y vƒÉn b·∫£n t·ª´ k·∫øt qu·∫£ nh·∫≠n d·∫°ng
			document.getElementById('messageInput').value = transcript; // ƒê∆∞a vƒÉn b·∫£n v√†o th·∫ª input
			console.log(transcript);
		};

		recognition.start(); // B·∫Øt ƒë·∫ßu nh·∫≠n d·∫°ng gi·ªçng n√≥i t·ª´ microphone
	}
</script>@*Voice to text*@
<script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
<script>
	function toggleLeaveRequestForm() {
		const formContainer = document.getElementById('leaveRequestFormContainer');
		if (formContainer.style.display === 'none' || formContainer.style.display === '') {
			formContainer.style.display = 'block'; // Show the form
		} else {
			formContainer.style.display = 'none';  // Hide the form
		}
	}

	// H√†m ƒë·ªÉ g√°n gi√° tr·ªã m·∫∑c ƒë·ªãnh cho ng√†y b·∫Øt ƒë·∫ßu v√† ng√†y k·∫øt th√∫c
	function setDefaultDates() {
		const today = new Date();
		const tomorrow = new Date(today);
		tomorrow.setDate(today.getDate() + 1); // C·ªông th√™m 1 ng√†y ƒë·ªÉ l·∫•y ng√†y mai

		// ƒê·ªãnh d·∫°ng ng√†y theo chu·∫©n yyyy-mm-dd
		const todayStr = today.toISOString().split('T')[0];
		const tomorrowStr = tomorrow.toISOString().split('T')[0];

		document.getElementById("StartDate").value = todayStr; // ƒê·∫∑t gi√° tr·ªã m·∫∑c ƒë·ªãnh cho ng√†y b·∫Øt ƒë·∫ßu
		document.getElementById("StartDate").setAttribute("min", todayStr); // Ch·∫∑n c√°c ng√†y tr∆∞·ªõc h√¥m nay

		document.getElementById("EndDate").value = tomorrowStr; // ƒê·∫∑t gi√° tr·ªã m·∫∑c ƒë·ªãnh cho ng√†y k·∫øt th√∫c (ng√†y mai)
		document.getElementById("EndDate").setAttribute("min", todayStr); // Ch·∫∑n c√°c ng√†y tr∆∞·ªõc h√¥m nay
	}

	// G·ªçi h√†m n√†y khi trang ƒë∆∞·ª£c load ƒë·ªÉ thi·∫øt l·∫≠p gi√° tr·ªã m·∫∑c ƒë·ªãnh ban ƒë·∫ßu
	document.addEventListener("DOMContentLoaded", function () {
		setDefaultDates(); // G√°n gi√° tr·ªã m·∫∑c ƒë·ªãnh
	});

	// ƒêo·∫°n m√£ ƒë·ªÉ reset form v√† gi·ªØ l·∫°i ng√†y m·∫∑c ƒë·ªãnh
	$('#leaveRequestForm').on('reset', function () {
		setTimeout(function () {
			setDefaultDates(); // G√°n l·∫°i gi√° tr·ªã m·∫∑c ƒë·ªãnh sau khi form ƒë∆∞·ª£c reset
		}, 0); // ƒê·ª£i form reset xong, r·ªìi m·ªõi g√°n l·∫°i gi√° tr·ªã
	});

	function submitLeaveRequest(event) {
		event.preventDefault();

		// Create FormData object
		const formData = new FormData();

		// Get form values and append to FormData
		formData.append('ClassRoomId', document.getElementById('ClassId').value);
		formData.append('UserID', document.getElementById('UserID').value);
		formData.append('StartDate', document.getElementById('StartDate').value);
		formData.append('EndDate', document.getElementById('EndDate').value);
		formData.append('Reasion', document.getElementById('Reason').value);

		const token = document.querySelector('input[name="__RequestVerificationToken"]').value;

		// Use Axios to send a POST request with FormData
		axios.post('/LeaveRequests/Create', formData, {
			headers: {
				'RequestVerificationToken': token,
				'Content-Type': 'multipart/form-data' // Important for sending FormData
			}
		})
			.then(function (response) {
				if (response.data.success) {
					toastr.success('G·ª≠i ƒë∆°n th√†nh c√¥ng. Vui l√≤ng ƒë·ª£i ƒë∆°n ƒë∆∞·ª£c ph√™ duy·ªát !', 'Th√†nh c√¥ng', { timeOut: 3000 })
					$('#leaveRequestForm')[0].reset();
					toggleLeaveRequestForm(); // Hide the form on success
					getAllLeaveRequests();
				}
			})
			.catch(function (error) {
				if (error.response && error.response.status === 400) {
					alert('Validation errors: ' + error.response.data.errors.join(', '));
				} else {
					alert('An error occurred: ' + error.message);
				}
			});
	}

	function getAllLeaveRequests() {
		const classId = document.getElementById('ClassId').value;
		const userId = document.getElementById('UserID').value;
		const isOwner = '@Model.isOwner';
		let params = { classId: classId, userId: userId, isOwner: isOwner }
		axios.get('/LeaveRequests/GetAllLeaveRequestByUserId', { params })
			.then(function (response) {
				const leaveRequests = response.data;
				const leaveRequestsContainer = document.getElementById('leaveRequestsList');
				leaveRequestsContainer.innerHTML = ''; // Clear previous data

				leaveRequests.forEach(request => {
					// Create a column wrapper for the card
					const col = document.createElement('div');
					col.classList.add('col-md-3', 'col-sm-6', 'mb-3'); // 4 cards per row on medium+ and 2 on small screens

					// Create the card and append it to the column
					const card = createLeaveRequestCard(request);
					col.appendChild(card);

					// Append the column (with the card) to the row container
					leaveRequestsContainer.appendChild(col);
				});
			})
			.catch(function (error) {
				console.error('An error occurred while fetching leave requests:', error);
			});
	}

	function createLeaveRequestCard(request) {
		const card = document.createElement('div');
		card.classList.add('card-letter',); // Ensure cards are equal height

		// Set the background color based on status
		if (request.status === 0) {
			card.style.backgroundColor = '#fff26a'; // Background color for status 0
		} else if (request.status === 1) {
			card.style.backgroundColor = '#76ff93'; // Background color for status 1
		} else if (request.status === -1) {
			card.style.backgroundColor = '#ff8c8c'; // Background color for status -1
		}

		const cardBody = document.createElement('div');
		cardBody.classList.add('card-body');
		let statusMessage;
		switch (request.status) {
			case 0:
				statusMessage = 'ƒêang ch·ªù duy·ªát'; // Status 0
				break;
			case 1:
				statusMessage = 'ƒê√£ duy·ªát'; // Status 1
				break;
			case -1:
				statusMessage = 'ƒê√£ t·ª´ ch·ªëi'; // Status -1
				break;
			default:
				statusMessage = 'Tr·∫°ng th√°i kh√¥ng x√°c ƒë·ªãnh'; // Fallback for undefined status
		}
		const isOwner = @Model.isOwner.ToString().ToLower(); // Chuy·ªÉn ƒë·ªïi th√†nh true/false
		const userId = @Html.Raw(Json.Serialize(Model.Owner.Id));
		const currentUserId = @Html.Raw(Json.Serialize(user.Id));

		if (isOwner) {
			cardBody.innerHTML = `
					<h5 class="card-title">L√Ω do: ${request.reasion}</h5>
					<p class="card-text">
						<strong>H·ªç v√† t√™n:</strong> ${request.name}<br/>
						<strong>Ng√†y b·∫Øt ƒë·∫ßu:</strong> ${new Date(request.startDate).toLocaleDateString()}<br/>
						<strong>Ng√†y k·∫øt th√∫c:</strong> ${new Date(request.endDate).toLocaleDateString()}<br/>
						<strong>Tr·∫°ng th√°i:</strong> ${statusMessage}<br/>
					</p>`;

			if (request.status === 0 && request.userID.trim() !== userId) {

				// T·∫°o button Duy·ªát
				const approveButton = document.createElement('button');
				approveButton.textContent = 'Duy·ªát';
				approveButton.classList.add('btn-duyet');
				approveButton.onclick = function () {
					updateLeaveRequestStatus(request.id, 1); // 1 cho "ƒê√£ duy·ªát"
				};

				// T·∫°o button T·ª´ ch·ªëi
				const rejectButton = document.createElement('button');
				rejectButton.textContent = 'T·ª´ ch·ªëi';
				rejectButton.classList.add('btn-tu-choi');
				rejectButton.onclick = function () {
					updateLeaveRequestStatus(request.id, -1); // -1 cho "ƒê√£ t·ª´ ch·ªëi"
				};

				// Th√™m c√°c n√∫t v√†o card body
				cardBody.appendChild(approveButton);
				cardBody.appendChild(rejectButton);

			}
		}
		else {
			cardBody.innerHTML = `
							<h5 class="card-title">L√Ω do: ${request.reasion}</h5>
							<p class="card-text">
								<strong>Ng√†y b·∫Øt ƒë·∫ßu:</strong> ${new Date(request.startDate).toLocaleDateString()}<br/>
								<strong>Ng√†y k·∫øt th√∫c:</strong> ${new Date(request.endDate).toLocaleDateString()}<br/>
								<strong>Tr·∫°ng th√°i:</strong> ${statusMessage}<br/>
							</p>`;
		}


		if (request.status === 0 && request.userID.trim() === currentUserId) {
			// Create a delete button
			const deleteButton = document.createElement('button');
			deleteButton.innerHTML = '&times;'; // This is the "X" character
			deleteButton.classList.add('delete-btn'); // Button styling and positioning
			deleteButton.onclick = function () {
				deleteLeaveRequest(request.id); // Pass the leave request ID to delete function
			};

			card.appendChild(deleteButton);
		}
		card.appendChild(cardBody);
		return card;
	}

	function updateLeaveRequestStatus(requestId, status) {
		axios.put('/LeaveRequests/UpdateStatus', { leaveRequestId: requestId, status: status })
			.then(response => {
				if (response.data.success) {
					toastr.success('C·∫≠p nh·∫≠t tr·∫°ng th√°i th√†nh c√¥ng!', 'Th√†nh c√¥ng', { timeOut: 3000 });
					getAllLeaveRequests();
				} else {
					toastr.error('C·∫≠p nh·∫≠t tr·∫°ng th√°i th·∫•t b·∫°i.', 'G·∫∑p l·ªói!')
					console.error('C√≥ l·ªói x·∫£y ra:', response.data.errors);
				}
			})
			.catch(error => {
				if (error.response) {
					console.error('C√≥ l·ªói x·∫£y ra khi g·ªçi API:', error.response.data);
				} else {
					console.error('C√≥ l·ªói x·∫£y ra:', error);
				}
			});
	}

	document.addEventListener('DOMContentLoaded', function () {
		getAllLeaveRequests(); // Call function when the page loads
	});

	function deleteLeaveRequest(id) {
		// Show a confirmation dialog before deleting
		const confirmation = confirm("B·∫°n c√≥ ch·∫Øc ch·∫Øn mu·ªën xo√° y√™u c·∫ßu ngh·ªâ ph√©p n√†y?");
		if (confirmation) {
			// Make an axios call to delete the leave request
			axios.delete(`/LeaveRequests/Delete/${id}`)
				.then(function (response) {
					// Refresh the leave requests list
					toastr.success('Xo√° ƒë∆°n th√†nh c√¥ng !', 'Th√†nh c√¥ng', { timeOut: 3000 });
					getAllLeaveRequests();
				})
				.catch(function (error) {
					console.error('An error occurred while deleting the leave request:', error);
				});
		}
	}


</script> @* G·ª≠i ƒë∆°n xin ngh·ªâ ph√©p*@
<script>
	function setupResumable(assignmentId) {
		const r = new Resumable({
			target: '/upload/UploadFileResumable',
			chunkSize: 1 * 1024 * 1024,  // 1MB
			simultaneousUploads: 3,
			testChunks: true,
			throttleProgressCallbacks: 1
		});

		r.assignBrowse(document.getElementById(`FileInput_${assignmentId}`));

		r.on('fileAdded', function (file) {
			document.getElementById(`uploadStatus_${assignmentId}`).textContent = 'ƒêang upload...';
			r.upload();  // Upload ngay khi file ƒë∆∞·ª£c th√™m v√†o
		});

		r.on('fileProgress', function (file) {
			const progress = Math.floor(file.progress() * 100);
			document.getElementById(`uploadStatus_${assignmentId}`).textContent = `ƒêang upload: ${progress}%`;
		});

		r.on('fileSuccess', function (file, response) {
			const data = JSON.parse(response);
			document.getElementById(`uploadedFilePath`).value = data.filePath;
			document.getElementById(`uploadStatus_${assignmentId}`).textContent = "Upload th√†nh c√¥ng!";
		});

		r.on('fileError', function (file, message) {
			document.getElementById(`uploadStatus_${assignmentId}`).textContent = `L·ªói upload: ${message}`;
		});
	}

	function checkFileSize(input, maxFileSize) {
		const file = input.files[0]; // L·∫•y file ƒë·∫ßu ti√™n ng∆∞·ªùi d√πng ch·ªçn
		const max_size = maxFileSize * 1024 * 1024;
		if (file) {
			// Ki·ªÉm tra dung l∆∞·ª£ng file
			if (file.size > max_size) {
				alert("File qu√° l·ªõn, vui l√≤ng ch·ªçn file c√≥ dung l∆∞·ª£ng nh·ªè h∆°n " + (max_size / (1024 * 1024)) + " MB.");
				input.value = ''; // X√≥a gi√° tr·ªã c·ªßa input n·∫øu file v∆∞·ª£t qu√° dung l∆∞·ª£ng
			}
		}
	}
</script> @* N·ªôp bt theo dung l∆∞·ª£ng*@
<script>
	// G·ª≠i form ch·ªânh s·ª≠a qua AJAX
	$("#setting").on("click", "#saveButton_setting", function (e) {
		var form = $("#editClassRoomForm");
		e.preventDefault();
		// G·ª≠i y√™u c·∫ßu POST v·ªõi d·ªØ li·ªáu form
		axios.post('/ClassRooms/Edit', new URLSearchParams(new FormData(form[0])).toString())
			.then(function (response) {
				// Ki·ªÉm tra k·∫øt qu·∫£ tr·∫£ v·ªÅ
				if (response.data.success) {
					toastr.success('L∆∞u th√†nh c√¥ng', 'Th√†nh c√¥ng', { timeOut: 3000 });
				} else {
					toastr.error('L·ªói trong qu√° tr√¨nh l∆∞u d·ªØ li·ªáu', 'Th·∫•t b·∫°i', { timeOut: 3000 });
				}
			})
			.catch(function (error) {
				// X·ª≠ l√Ω l·ªói n·∫øu c√≥
				toastr.error('ƒê√£ x·∫£y ra l·ªói khi g·ª≠i y√™u c·∫ßu.', 'Th·∫•t b·∫°i', { timeOut: 3000 });
				console.error(error); // In chi ti·∫øt l·ªói ra console ƒë·ªÉ debug
			});
	});
</script>@*G·ª≠i form ch·ªânh s·ª≠a class*@
<script>
	document.addEventListener('DOMContentLoaded', function () {
		const deleteButton = document.getElementById('confirmDeleteButton');
		const deleteForm = document.getElementById('deleteForm');

		// Khi nh·∫•n n√∫t x√°c nh·∫≠n x√≥a
		deleteButton.addEventListener('click', function () {
			// G·ª≠i form x√≥a khi x√°c nh·∫≠n
			deleteForm.submit();
			// Hi·ªÉn th·ªã th√¥ng b√°o th√†nh c√¥ng
			toastr.success('Xo√° l·ªõp th√†nh c√¥ng !!!', 'Th√†nh c√¥ng', { timeOut: 3000 });
		});
	});
</script> @*Xo√° l·ªõp*@